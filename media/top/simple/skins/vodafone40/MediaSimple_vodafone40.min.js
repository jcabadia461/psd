(function(a){b.prototype=new psd.fenix.DisplayObjectContainer();function b(A,S,N,G,O){psd.fenix.DisplayObjectContainer.call(this);this.className="psd.media.SkinnedSimpleMediaPlayer";var t=O;var j=t.skin.id;var u=A;var l=S;var w=N;var q=null;var I=G;var F=null;var L=null;var g=null;var c=false;var R=null;var D=null;var K=null;var Q=null;var f=null;var J=null;var y=null;var E=null;var s=false;var o=false;var v=false;var M=function(){var T=(l&&w)?false:true;q=new psd.fenix.Stage(u,{autosize:T,width:l,height:w});q.addEventListener(psd.fenix.StageEvent.INIT,i,this);q.addEventListener(psd.fenix.StageEvent.INIT_ERROR,h,this);q.addEventListener(psd.fenix.StageEvent.DISPLAY_STATE_CHANGE,B,this);q.addEventListener(psd.fenix.StageEvent.RESIZE,m,this);q.init()};var h=function(){Log.log("INIT ERROR")};var i=function(){var V=e("psd.media.skins.MediaSimple_"+j),U=typeof(t.base)!="undefined"?t.base:"",T=t.media.type.indexOf("video")>=0?psd.fenix.media.MediaElement.TYPE_VIDEO:psd.fenix.media.MediaElement.TYPE_AUDIO;F=new psd.fenix.media.MediaElement(T,I,{autoplay:t.player.autoplay,poster:t.media.poster});L=new psd.fenix.media.MediaController();L.addEventListener(psd.fenix.event.MediaEvent.ENDED,r,this);L.addEventListener(psd.fenix.event.MediaEvent.BEGIN,z,this);L.addEventListener(psd.fenix.event.MediaEvent.PLAYING,H,this);L.addEventListener(psd.fenix.event.MediaEvent.TIME_UPDATE,C,this);L.attachStream(F);if(t.player.controls==undefined||(t.player.controls!=false&&t.player.controls!="false")){g=new V(t.skin,U);g.addEventListener(psd.media.SkinEvent.SKIN_READY,k,this);this.addChild(g)}q.addChild(this)};var e=function(W){var X=W.split("."),T=X.length,U,V=(window||this);for(U=0;U<T;U++){V=V[X[U]]}return V};var k=function(){if(typeof(g.playPauseElement)!="undefined"){R=g.playPauseElement();R.addEventListener(psd.fenix.MouseEvent.MOUSE_DOWN,P,this)}if(typeof(g.fullscreenElement)!="undefined"){K=g.fullscreenElement();K.addEventListener(psd.fenix.MouseEvent.MOUSE_DOWN,x,this)}if(typeof(g.currentTimeElement)!="undefined"){Q=g.currentTimeElement()}if(typeof(g.totalTimeElement)!="undefined"){f=g.totalTimeElement()}if(typeof(g.progressBarElement)!="undefined"){D=g.progressBarElement();D.addEventListener(psd.fenix.event.ProgressEvent.CHANGE,p,this)}if(typeof(g.volumeElement)!="undefined"){J=g.volumeElement();J.setProgress(0.8);J.addEventListener(psd.fenix.event.ProgressEvent.CHANGE,n,this)}if(typeof(g.muteElement)!="undefined"){y=g.muteElement();y.addEventListener(psd.fenix.MouseEvent.MOUSE_DOWN,d,this)}if(this.isPlaying()){g.updateOnStatusChange("play")}g.resizeSkin(q.stageWidth(),q.stageHeight());c=true};var P=function(){if(L.paused()){this.play()}else{this.pause()}};var x=function(){if(q.displayState()==psd.fenix.stage.StageDisplayState.NORMAL){q.displayState(psd.fenix.stage.StageDisplayState.FULL_SCREEN)}else{q.displayState(psd.fenix.stage.StageDisplayState.NORMAL)}};var p=function(T){L.seek(T.data)};var n=function(T){L.volume(T.data);E=T.data;if(g.muteElement!=undefined){if(T.data==0){if(g){g.updateOnMuteChange("muted")}}else{if(g){g.updateOnMuteChange("active")}}}};var d=function(T){var U=g.volumeElement().currentProgress();if(U<=0){U=E<=0?0.8:E;if(g){g.volumeElement().setProgress(U)}if(g){g.updateOnMuteChange("active")}}else{E=U;if(g){g.volumeElement().setProgress(0)}if(g){g.updateOnMuteChange("muted")}U=0}L.volume(U)};var C=function(){var V=L.duration()>3600?"hh:mm:ss":"mm:ss",U=L.duration(),T=L.currentTime();if(Q){Q.text(L.currentTimeAsTimeCode(V))}if(f){if(t.media.live!=undefined&&t.media.live==true){f.text("Live")}else{f.text(L.durationAsTimeCode(V))}}if(D){D.setProgress(L.currentTime()/L.duration())}if(!s&&T>0.25*U){s=true;this.dispatchEvent(new psd.media.MediaEvent(psd.media.MediaEvent.MEDIA_FIRST_QUART,{duration:U}))}if(!o&&T>0.5*U){o=true;this.dispatchEvent(new psd.media.MediaEvent(psd.media.MediaEvent.MEDIA_HALF,{duration:U}))}if(!v&&T>0.75*U){v=true;this.dispatchEvent(new psd.media.MediaEvent(psd.media.MediaEvent.MEDIA_THIRD_QUART,{duration:U}))}};var z=function(T){this.dispatchEvent(new psd.media.MediaEvent(psd.media.MediaEvent.MEDIA_BEGIN,{duration:L.duration()}))};var r=function(T){if(g){g.updateOnStatusChange("pause")}if(D){D.setProgress(0.01)}this.dispatchEvent(new psd.media.MediaEvent(psd.media.MediaEvent.MEDIA_COMPLETE,{duration:L.duration()}));s=false;o=false;v=false};var H=function(T){if(g&&c){g.updateOnStatusChange("play")}};var m=function(){var T=new psd.fenix.Rectangle(0,0,q.stageWidth(),q.stageHeight());if(g){T=g.resizeSkin(q.stageWidth(),q.stageHeight())}F.resize(T.x,T.y,T.width,T.height)};var B=function(){if(g){g.updateOnDisplayStateChange(q.displayState())}};this.isPlaying=function(){return !L.paused()};this.play=function(){L.play();if(g){g.updateOnStatusChange("play")}};this.pause=function(){L.pause();if(g){g.updateOnStatusChange("pause")}};this.requestFullScreen=function(){q.displayState(psd.fenix.stage.StageDisplayState.FULL_SCREEN)};this.cancelFullScreen=function(){q.displayState(psd.fenix.stage.StageDisplayState.NORMAL)};M.apply(this)}a.SkinnedSimpleMediaPlayer=b}(psd.media));(function(b){a.prototype=new psd.framework.Event();a.SKIN_READY="SKIN_READY";function a(c){psd.framework.Event.call(this,c)}b.SkinEvent=a})(psd.media);(function(a){b.prototype=new psd.fenix.DisplayObjectContainer();function b(s,n){psd.fenix.DisplayObjectContainer.call(this);this.className="psd.media.skins.MediaSimple_vodafone40";var e=s;var m=n!=undefined?n:"";var d=null;var g=false;var h=null;var r=null;var q=null;var l=null;var f=null;var c=null;var p=51;var o=53;var t=20;var i=null;var u=null;var k=function(){d=new psd.fenix.textures.TextureAtlas(m+"/psdmedia/media/simple/skins/vodafone40/rsc/player.atlas.png",m+"/psdmedia/media/simple/skins/vodafone40/rsc/player.atlas.php",m!="");d.addEventListener("texture_atlas_ready",j,this)};var j=function(){var x=d.texture(),w=d.getFrames(["play","pause"]),v=d.getFrames("bar_fg_begin"),B=d.getFrames("bar_bg_end"),z=d.getFrames("bar_bg_center"),y=d.getFrames("bar_fg_center"),A=d.getFrames("slider_volume");h=new psd.fenix.Movieclip(x,w);h.useHandCursor=true;h.buttonMode=true;h.gotoAndStop("play");h.boundsDetection(true);l=new psd.fenix.Movieclip(x,A);l.useHandCursor=true;l.buttonMode=true;r=new psd.fenix.controls.ProgressBar(x,v,B,z,y);r.slider(l);r.liveUpdate(true);r.visible=false;var C=new psd.fenix.text.TextFormat();C.color=16777215;C.size=12;q=new psd.fenix.text.TextField();q.setTextFormat(C);q.text(e.coverMessage);f=new psd.fenix.DisplayObject();f.x=o;c=new psd.fenix.DisplayObject();c.visible=false;this.addChild(h);this.addChild(r);this.addChild(q);this.addChild(f);this.addChild(c);g=true;this.dispatchEvent(new psd.media.SkinEvent(psd.media.SkinEvent.SKIN_READY))};this.resizeSkin=function(w,v){if(g){i=w;u=v;h.x=(o-h.width())/2;h.y=(v-h.height())/2;f.graphics().clear();f.graphics().lineStyle(1,16777215,1);f.graphics().moveTo(0,0);f.graphics().lineTo(0,v);q.x=f.x+f.width()+t;q.y=(v-q.height())/2;r.resize(80);r.x=w-r.width()-10;r.y=(v-r.height())/2+7;c.graphics().clear();c.graphics().lineStyle(1,16777215,1);c.graphics().moveTo(r.x-t,0);c.graphics().lineTo(r.x-t,v);this.graphics().clear();this.graphics().lineStyle(0,16698112,1);this.graphics().beginFill(16698112,1);this.graphics().drawRect(0,0,w,v);this.graphics().endFill()}return new psd.fenix.Rectangle(0,0,w,v)};this.updateOnStatusChange=function(v){if(v=="play"){h.gotoAndStop("pause");q.text(e.liveMessage);r.visible=true;c.visible=true}else{if(v=="pause"){h.gotoAndStop("play");q.text(e.coverMessage);r.visible=false;c.visible=false}}};this.playPauseElement=function(){return h};this.titleElement=function(){return q};this.volumeElement=function(){return r};k.apply(this)}a.MediaSimple_vodafone40=b}(psd.media.skins));