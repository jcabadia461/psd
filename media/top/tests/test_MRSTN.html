<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title></title>
    <script type="text/javascript" src="../js/TopPlayer.lib.js"></script>
    <script src='http://www.alten-formacion.es/playser/js/vendor/jquery-1.11.0.min.js'></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.2/jquery-ui.min.js"></script>
    <!-- <script type="text/javascript" src="http://widgets.outbrain.com/outbrain.js"></script> -->
</head>
<body>
<div id="top_container" style="overflow: hidden;margin:auto;height: 480px;width:640px;"></div> <!--640x480-->
    <script>
        var pl = new emic.top.TopPlayer();
        mm = pl.getMediaModule();
        aa = pl.getAdModule();
        ui = pl.getUIModule();
        mm.addEventListener(emic.top.event.MediaEvent.ON_READY, onMediaHandler);
        mm.addEventListener(emic.top.event.MediaEvent.ON_CUE, onMediaHandler);
        mm.addEventListener(emic.top.event.MediaEvent.ON_ERROR, onMediaHandler);
        mm.addEventListener(emic.top.event.MediaEvent.ON_AD_INSTREAM_START, onMediaHandler);
        mm.addEventListener(emic.top.event.MediaEvent.ON_AD_INSTREAM_END, onMediaHandler);
        mm.addEventListener(emic.top.event.MediaEvent.ON_STATUS_CHANGE, onMediaHandler);
        mm.addEventListener(emic.top.event.MediaEvent.ON_SWITCH_REQUEST, onMediaHandler);
        mm.addEventListener(emic.top.event.MediaEvent.ON_SWITCH_COMPLETE, onMediaHandler);
	    mm.addEventListener(emic.top.event.MediaEvent.ON_PRELOAD_CONTROLLER_COMPLETE, onMediaHandler);	
        aa.addEventListener(emic.top.event.AdEvent.ON_AD_INSTREAM_START, onAdHandler);
        aa.addEventListener(emic.top.event.AdEvent.ON_AD_INSTREAM_END, onAdHandler);
        aa.addEventListener(emic.top.event.AdEvent.ON_AD_VIDEO_START, onAdHandler);
        aa.addEventListener(emic.top.event.AdEvent.ON_AD_VIDEO_END, onAdHandler);
        var config = {};
        config.generic = {container: "top_container", id:"topTest"};
        config.ui = {
          skin: emic.top.UIModule.SKIN_MERISTATION,
          //***last test***poster: "/psdmedia/media/top/skins/meristation/assets/img/imagenes_contenido/meriposter.png",
          poster: "http://media2.meristation.com/topmeri/20152/24/20150224153043_1424789096_still.jpg",
          overrideNativeControls: true,
          showPreview: false,
          skinData:{
		      	previewMode : "normal"
          }
        };        
        config.ad = {
            //container: "ad_container",
            //conf:"confs/pub/playser/audio.js",
            conf:"/psdmedia/resources/confs/pub/playser/video_pruebas_carcasa.js",
            //http://playser.player-top.prisasd.com/psdmedia/resources/confs/pub/playser/playserweb.json
            pTags: "zoo_madrid_a,zoo_a,comunidad_madrid_a,animales_cautividad_a,reproduccion_a,espana_a,mamiferos_a,animales_a,especies_a,medio_ambiente_a,ccaa,madrid",
            enabled:false
        };
        config.stat = {
            //conf:"confs/stats/profiles/playser.json",
            enabled:true,
            extraData:{
                canal: "CanalPrueba",
                seccionTematica: "Sección Temática prueba",
                programa: "Programa prueba",
                seccion: "Sección prueba",
                objeto_ed: "Objeto editorial prueba",
                id_usuario: "Userid prueba",
                titulo_pagina: "Título página prueba",
                id:"myId",
                seccion_escucha: "Sección escucha prueba"
            }
        };
        config.media = {
            controllerPriority: [emic.top.MediaModule.CONTROLLER_TYPE_AKAMAIHDS, emic.top.MediaModule.CONTROLLER_TYPE_HTML5NATIVE],
            tecPriorityPC: [emic.top.MediaModule.TECHNOLOGY_FLASH, emic.top.MediaModule.TECHNOLOGY_HTML5],

            renditions: [ 
                    {
                        "bitrate" : "12",
                        "label" : "12"
                    }, 
                    {
                        "bitrate" : "13",
                        "label" : "13"
                    }
            ],
            urlHTML5: [],
            //container: "media_container",
            autoplay: false,
            title:"World War Toons",
            description:"World War Toons",
            //id:"20150414095915",
            id:"28032015180702",
	        duration:92425,
            //urlMosaic : "http://media2.meristation.com/topmeri/20152/8/mosaic_df13e699383cb44eab8487fca3c2e09f.jpg",
            //***Last test***urlMosaic : "http://media2.meristation.com/topmeri/20152/23/mosaic_d62ef3a3f4a6d67703a64b31fa4e4870.jpg",
            urlMosaic : "http://media2.meristation.com/topmeri/20154/14/mosaic_efebc38d84b58cea49808a9e1ce6eba0.jpg",
            //***version en archivo local***relacionadosUrl : "/psdmedia/media/top/tests/related_videos.js",
            //relacionadosUrl : "http://fapi-top.prisasd.com/api/search/meristation/video/?order=true&size=12",
            //relacionadosUrl : "",
            //url:'http://meristation-vh.akamaihd.net/z/topmeri/20152/8/df13e699383cb44eab8487fca3c2e09f_3000.mp4/manifest.f4m',
            //url: "http://meristationlive-f.akamaihd.net/z/livemeri31_1@75863/manifest.f4m",
            //url: "http://wmsond.cadenaunionradio.com/audio_ond/_definst_/mp3:ftpaudio_ond/CO/ACTIVA/NOTAS/000a386e.mp3/manifest.f4m",
            url:"http://meristationlive-f.akamaihd.net/z/livemeri31_1@75863/manifest.f4m",
            //url : "http://meristation-vh.akamaihd.net/z/topmeri/20152/24/acc3ef69d013ce5479d7dd40ae4a3cae_,500,1500,3000,.mp4.csmil/manifest.f4m",
            //url : "http://meristation-vh.akamaihd.net/z/topmeri/20154/14/efebc38d84b58cea49808a9e1ce6eba0_500.mp4/manifest.f4m",
            //url : "http://meristation-vh.akamaihd.net/z/topmeri/20152/24/10eb41573ec4a97cddaf88dfb1dc6b52_,500,1500,3000,.mp4.csmil/manifest.f4m",
	        mimetype:"video/mp4",
            isLive:true,
            isDVR:true
        };
		emic.top.debugTop = true;
        
        pl.init(config);

        var plui = new emic.top.TopUIPlayer();

        function onMediaHandler(e){

            console.log("MEDIA Evento test:", e.type);

            switch (e.type){

                case emic.top.event.MediaEvent.ON_READY:
                    //pl.config({media:{id:'RHOZFM'}});
                    //pl.config({media:{id:'LOS40'}});
                    console.log("REady!!!");
                    //mm.play();
                break;
                case emic.top.event.MediaEvent.ON_STATUS_CHANGE:
                    console.log("STATUS: ",mm.getStatus());
                break;
                case emic.top.event.MediaEvent.ON_CUE:
                    console.log('Artist: ' + ev.data.cuePoint.artistName + '<BR>Title: ' + ev.data.cuePoint.cueTitle);
                break;
            }
        }
        function onAdHandler(e){
            console.log("AD Evento test:", e.type, e.data, e.id);
            switch (e.type){

                case emic.top.event.AdEvent.ON_AD_INSTREAM_START:
                    try{
                        document.getElementById(e.id).style.display = "";
                    }catch (e){

                    }
                break;
                case emic.top.event.AdEvent.ON_AD_INSTREAM_END:
                    try{
                        document.getElementById(e.id).style.display = "none";
                    }catch (e){

                    }
                break;
                case emic.top.event.AdEvent.ON_AD_VIDEO_START:

                break;
                case emic.top.event.AdEvent.ON_AD_VIDEO_END:

                break;
            }
        }
    </script>
</body>
</html>