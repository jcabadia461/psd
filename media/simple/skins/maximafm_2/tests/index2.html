<?php
header('access-control-allow-origin: http://cadenaser2.pre.prisacom.int');
?>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">

	<head>
		<title>Tests SimpleMediaPlayer Maxima FM - Audio</title>
		<link href="forms.css" rel="stylesheet" type="text/css">
		<script type="text/javascript" src="/psdmedia/media/simple/js/SimpleMediaPlayer.min.js"></script>
		
		<style type="text/css">
		
			#menu {
				float: left;
				width: 30%;
				padding: 1%;
			}
			
			#content {
				float:rigth:
				width:68%;
			}
			
			#media_player_container
			{
				float:left;
				width:35%;
				padding: 1%;
			}
			
			#media_player_console
			{
				float:right;
				width:28%;
				padding: 1%;
			}
			
			#console
			{
				height: 100%;
			}
			
		</style>		
		
	</head>
	
	<body>
	
		<div id="menu">
			
			<div id="controls" style="text-align:center;">
			
				<fieldset>
					<legend>Controles</legend>
					<button type="button" name="load_btn" value="Load" onclick="loadPlayer1()">Cargar player1</button>
					<button type="button" name="load_btn" value="Load" onclick="loadPlayer2()">Cargar player2</button>
					
				</fieldset>
			</div>
		
			<br />
		
			<div style="text-align:center;">
				<form id="settings" action="javascript:loadPlayer();">
					
					<fieldset>
						<legend>Contenido</legend>
						<div>
							<label for="content">Elige el video/audio de prueba</label>
							<select name="content">
								<option>01.- Audio (mp4) - AkamaiHD</option>
								<option>02.- Audio (mp3) - Akamai</option>
								<option>03.- Video (mp4) - Akamai</option>
								<option>04.- Video (mp4) - AkamaiHD</option>
								<option>05.- Audio (mp4) - Brightcove</option>
								<option>06.- Video (mp4) - Brightcove</option>
								<option>07.- Audio (live) - Streamtheworld</option>
								<option>08.- Audio (mp4) - Streamtheworld</option>
								<option>09.- Video (mp4) - Streamtheworld</option>
								<option>10.- Video - HTML5</option>
								<option>11.- Video (live) - AkamaiHD</option>
								<option>12.- Video (mp4) - AkamaiHDS</option>
								<option>13.- Video (mp4) - Akamai (RTMP)</option>
							</select>
						</div>
					</fieldset>
					
					<br />
					
					<fieldset>
						<legend>Player Settings</legend>
						<div class="inline">
							<input type="checkbox" name="force_urlbase" />
							<label for="force_urlbase">Forzar <strong>URL base</strong></label>
						</div>
						<div class="inline"><input type="text" name="urlbase" style="width:100%;" /></div>
						<div class="inline">
							<input type="checkbox" name="autoplay" />
							<label for="autoplay">Utilizar <strong>reproducción automática</strong></label>
						</div>
						
						<div class="inline">
							<input type="checkbox" name="force_mode" />
							<label for="mode">Orden <strong>modo</strong></label>
							<select name="mode" value="opaque">
								<option>flash,html5,directlink</option>
								<option>directlink,flash,html5</option>
								<option>html5,directlink,flash</option>
								<option>flash,directlink</option>
								<option>flash</option>
								<option>html5</option>
								<option>directlink</option>
							</select>
						</div>
						
						<div class="inline">
							<input type="checkbox" name="controls" />
							<label for="controls"><strong>Ocultar Controles</strong> de reproducción</label>
						</div>
						<div class="inline">
							<input type="checkbox" name="force_width" checked="true"/>
							<label for="force_width">Forzar <strong>ancho</strong> de player</label>
							<input type="number" name="playerwidth" min="0" value="500" />							
						</div>
						<div class="inline">
							<input type="checkbox" name="force_height" checked="true"/>
							<label for="force_height">Forzar <strong>alto</strong> de player</label>
							<input type="number" name="playerheight" min="0" value="500" />
						</div>
						<div class="inline">
							<input type="checkbox" name="force_wmode" />
							<label for="wmode">Forzar <strong>wmode</strong></label>
							<select name="wmode" value="opaque">
								<option>window</option>
								<option>direct</option>
								<option>opaque</option>
								<option>transparent</option>
								<option>gpu</option>
							</select>
						</div>
						<div class="inline">
							<label for="bgcolor"><strong>Color</strong> de fondo</label>
							<input type="color" name="bgcolor" value="#ff0000" style="width:75px;" />
						</div>
					</fieldset>
					
					<br />
					
					<fieldset>
						<legend>Skin settings</legend>
						<div class="inline">
							<input type="checkbox" name="skinhtml5" />
							<label for="skinhtml5">Utilizar <strong>Skin HTML5</strong></label>
						</div>	
					</fieldset>
					<button type="button" name="fullscreen_btn" value="FullScreen" onclick="cancelFullscreen()">FullScreenOut</button>
					<button type="button" name="modoTeatro_btn" value="cancelModoTeatro" onclick="cancelModoTeatro()">ModoTeatroOut</button>
				</form>
			</div>
		</div>
	
		<div id="content">
			<div id="media_player_container"></div>
			<div id="media_player_container2"></div>
		</div>
		
		<script type="text/javascript">
			var mediaPlayer, mediaPlayer2;
			function loadPlayer1()
			{
				var settingsForm = document.forms[0],
					playerConfig = { };
				
				playerConfig.id = "media_player_container";				
				if(settingsForm.force_urlbase.checked) { playerConfig.base = settingsForm.urlbase.value; }
				
				playerConfig.media = getMedia1();
				
				playerConfig.ads = {};
				playerConfig.ads.conf = "confPubli.xml";
				playerConfig.ads.tags = "SER_RADIO";

				playerConfig.player = {};
				playerConfig.player.container = "media_player_container";
				
				if(settingsForm.force_mode.checked) {playerConfig.player.mode = settingsForm.mode.value;}
				if(settingsForm.force_wmode.checked) { playerConfig.player.wmode = settingsForm.wmode.value; }
				if(settingsForm.force_width.checked) { playerConfig.player.width = settingsForm.playerwidth.value; }
				if(settingsForm.force_height.checked) { playerConfig.player.height = settingsForm.playerheight.value; }
				
				if(settingsForm.autoplay.checked) { playerConfig.player.autoplay = "true"; }
				if(settingsForm.controls.checked) { playerConfig.player.controls = "false"; }
				playerConfig.player.bgColor = settingsForm.bgcolor.value;
				
				playerConfig.skin = {};
				playerConfig.skin.id = "maximafm_1";
				
				if(settingsForm.skinhtml5.checked) { playerConfig.skin.html5 = "true"; }
				
				//document.getElementById("console").value = "";
				
				console.log("index - media_player_container");
				mediaPlayer = new psd.media.SimpleMediaPlayer(playerConfig);
				mediaPlayer.addEventListener(psd.media.MediaEvent.MEDIA_BEGIN, onMediaBegin, mediaPlayer);
				mediaPlayer.addEventListener(psd.media.MediaEvent.MEDIA_COMPLETE, onMediaComplete);
				mediaPlayer.addEventListener(psd.media.MediaEvent.INITIALIZED, onMediaPlayerInitialized);
				mediaPlayer.addEventListener(psd.media.MediaEvent.MEDIA_START, onMediaPlayerStart);
				mediaPlayer.addEventListener(psd.media.MediaEvent.MEDIA_STOP, onMediaPlayerStop);
				mediaPlayer.init();
			}
			
			function loadPlayer2()
			{
				var settingsForm = document.forms[0],
					playerConfig2 = { };
				
				playerConfig2.id = "media_player_container2";				
				if(settingsForm.force_urlbase.checked) { playerConfig2.base = settingsForm.urlbase.value; }
				
				playerConfig2.media = getMedia2();
				
				playerConfig2.ads = {};
				playerConfig2.ads.conf = "confPubli.xml";
				playerConfig2.ads.tags = "SER_RADIO";

				playerConfig2.player = {};
				playerConfig2.player.container = "media_player_container2";
				
				if(settingsForm.force_mode.checked) {playerConfig2.player.mode = settingsForm.mode.value;}
				if(settingsForm.force_wmode.checked) { playerConfig2.player.wmode = settingsForm.wmode.value; }
				if(settingsForm.force_width.checked) { playerConfig2.player.width = settingsForm.playerwidth.value; }
				if(settingsForm.force_height.checked) { playerConfig2.player.height = settingsForm.playerheight.value; }
				
				if(settingsForm.autoplay.checked) { playerConfig2.player.autoplay = "true"; }
				if(settingsForm.controls.checked) { playerConfig2.player.controls = "false"; }
				playerConfig2.player.bgColor = settingsForm.bgcolor.value;
				
				playerConfig2.skin = {};
				playerConfig2.skin.id = "maximafm_2";
				
				if(settingsForm.skinhtml5.checked) { playerConfig2.skin.html5 = "true"; }
				
				console.log("index - media_player_container2");
				mediaPlayer2 = new psd.media.SimpleMediaPlayer(playerConfig2);
				mediaPlayer2.addEventListener(psd.media.MediaEvent.MEDIA_BEGIN, onMediaBegin2, mediaPlayer2);
				mediaPlayer2.addEventListener(psd.media.MediaEvent.MEDIA_COMPLETE, onMediaComplete2);
				mediaPlayer2.addEventListener(psd.media.MediaEvent.INITIALIZED, onMediaPlayerInitialized2);
				mediaPlayer2.addEventListener(psd.media.MediaEvent.MEDIA_START, onMediaPlayerStart2);
				mediaPlayer2.addEventListener(psd.media.MediaEvent.MEDIA_STOP, onMediaPlayerStop2);
				mediaPlayer2.init();
			}
			
			function getMedia1()
			{
				var media;
								
				media = 
				{
					/*type: 'video'
					, title: 'OttoKnowsMillionVoices.mp4'
					, desc: ''
					, src : "http://maximafm.pm.com.edgesuite.net/2012/11/FloRidaICry.mp4"
					, srcHTML5: ["http://snapshot.opera.com/resources/BigBuckBunny.ogv", "http://clips.vorwaerts-gmbh.de/VfE_html5.mp4"]
					, poster: 'http://maxima.fm/media/201211/23/20121123_2_maximafm.jpg'
					, cdn: { provider:"akamai" } */
					
					/*type: "audio/mp4"
					, title: "titulo del audio" 
					, desc: "desc del audio"
					, src : "http://sermedia-f.akamaihd.net/cadenaser/2011/05/20110501csrcsrcul_11_Aes_LAU.mp4"
					, srcHTML5 : "http://sermedia-f.akamaihd.net/cadenaser/2011/05/20110501csrcsrcul_11_Aes_LAU.mp4"
					, clipBegin: "250"
					, clipEnd: "400"
					, poster: "http://snapshot.opera.com/resources/BigBuckBunny.png"
					, cdn: { provider:"akamaihd"}*/
					
					type: "audio/mp4"
					, title: "live streamtheworld"
					, desc: "canal live de streamtheworld"
					//, src: "SER_BARCELONA"
					, src: "CADENASER"
					, live: true
					, cdn: { provider: "streamtheworld" } 
				};
				
				return media;
			}
			
			function getMedia2()
			{
				var media;
								
				media = 
				{
					type: 'video/mp4'
					//type: 'video'
					, title: 'OttoKnowsMillionVoices.mp4'
					, desc: ''
					, src : "http://maximafm.pm.com.edgesuite.net/2012/11/FloRidaICry.mp4"
					//, srcHTML5 : 'http://maximafm.pm.com.edgesuite.net/2012/11/FloRidaICry.mp4'
					, srcHTML5: ["http://snapshot.opera.com/resources/BigBuckBunny.ogv", "http://clips.vorwaerts-gmbh.de/VfE_html5.mp4"]
					, poster: 'http://maxima.fm/media/201211/23/20121123_2_maximafm.jpg'
					, cdn: { provider:"akamai" } 
				};
				
				return media;
			}
			
			function onMediaComplete()
			{
				console.log("++ onMediaComplete 1");
			}
			
			function onMediaPlayerInitialized()
			{
				
			}
			
			function onMediaPlayerStart(evt)
			{
				console.log("++ START 1");
				console.log("evt.data.playerName: " + evt.data.playerName);
				
				mediaPlayer2.pause();
				
			}
			
			function onMediaPlayerStop()
			{
				console.log("++ STOP 1");
				
			}
			
			function onMediaBegin(evt)
			{
				
				console.log("++ BEGIN 1");
				
			}
			
			function onMediaComplete2()
			{
				console.log("++ onMediaComplete 2");
				
			}
			
			function onMediaPlayerInitialized2()
			{
				
			}
			
			function onMediaPlayerStart2(evt)
			{
				console.log("++ START 2");
				console.log("evt.data.playerName: " + evt.data.playerName);
				
				mediaPlayer.pause();
			}
			
			function onMediaPlayerStop2()
			{
				console.log("++ STOP 2");
				
			}
			
			function onMediaBegin2(evt)
			{
				console.log("++ BEGIN 2");
				
			}
			
			
		</script>
		
	</body> 
</html>