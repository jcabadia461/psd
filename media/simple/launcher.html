<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">

	<head>
		<title>Tests SimpleMediaPlayer cadenaser - Launcher</title>
		<link href="forms.css" rel="stylesheet" type="text/css">
		<script type="text/javascript" src="/psdmedia/media/simple/js/SimpleMediaPlayer.min.js"></script>
		
		<style type="text/css"> 
			#media_player_container
			{
				width:100%;
				height:100%;
			}
		
		</style>
	</head>
	
	<body>
		<div id="media_player_container"></div>	
		
		<script type="text/javascript">
			
			window.onload = loadPlayer;
			
			function loadPlayer()
			{  
				//GET PARAMS FROM URL
				var src, srcHTML5, poster, provider, confPubli, mode, autoplay, live, skinHTML5, skin, type;

                //Si pasamos como parámetro testVideo=true o testAudio=true, incluiremos valores por defecto
                if (getUrlVars("testVideo") == 'true')
                {
                    console.log("Valores por defecto VIDEO");
                    src = "http://innovacion-f.akamaihd.net/media/prisacorp.m4v";
                    srcHTML5 = ["http://innovacion.prisadigital.com/media/prisacorp.webm","http://innovacion.prisadigital.com/media/prisacorp.m4v"];
                    //srcHTML5 = ["http://mediapm.edgesuite.net/ovp/content/demo/video/elephants_dream/elephants_dream_768x428_24.0fps_608kbps.mp4"];
                    poster = "/psdmedia/media/simple/tests/fenix.png";
                    provider = "akamaihd";
                    confPubli = "/psdmedia/media/simple/skins/cadenaser/conf_Publi_STW.xml";
                    mode = "flash,html5,directlink";
					autoplay = "false";
                    skinHTML5 = "true";
                    skin = "cadenaser";
                    type = "video/mp4";

                }
                else if (getUrlVars("testAudio") == 'true')
				{
					console.log("Valores por defecto AUDIO");

                    src = "http://sermedia-f.akamaihd.net/cadenaser/2013/08/20130805csrcsrsoc_2_Aes_LAU.mp4";
                    srcHTML5 = ["http://vmedia.cadenaser.com/cadenaser/2013/03/20130314csrcsrdep_4_Aes_LAU.mp4"];
                    provider = "akamaihd";
                    confPubli = "/psdmedia/media/simple/skins/cadenaser/conf_Publi_STW.xml";
                    mode = "flash,html5,directlink";
					autoplay = "false";
                    skinHTML5 = "true";
                    skin = "cadenaser";
                    type = "audio/mp4";
				}
                else
                {
                    console.log("Valores parametros");

                    if (getUrlVars("src")) {src = getUrlVars("src");}
                    //else {src = srcConst;}

                    if (getUrlVars("srcHTML5"))
                    {
                        srcHTML5 = getUrlVars("srcHTML5");

                        if (srcHTML5.split(",").length > 1)
                        {
                            var streams = srcHTML5.split(",");

                            srcHTML5 = [];
                            for (var i=0;i<streams.length;i++)
                            {
                                srcHTML5.push(streams[i]);
                            }
                        }
                    } 

                    if (getUrlVars("poster")) {poster = getUrlVars("poster");}

                    if (getUrlVars("provider")){provider = getUrlVars("provider");}

                    if (getUrlVars("confPubli")) {confPubli = getUrlVars("confPubli");}

                    if (getUrlVars("mode")) { mode = getUrlVars("mode");}
					
                    if (getUrlVars("autoplay")) { autoplay = getUrlVars("autoplay");}

                    if (getUrlVars("live")) { live = getUrlVars("live");}

                    if (getUrlVars("skinHTML5")) { skinHTML5 = getUrlVars("skinHTML5");}

                    if (getUrlVars("skin")) {skin = getUrlVars("skin");}

                    if (getUrlVars("type")) {type = getUrlVars("type");}
                    //GET PARAMS FROM URL
                }
			
				var playerConfig = { };
				 
				playerConfig.id = "media_player_container";
				
				playerConfig.media = {
							type: type
							, title: 'Fern�ndez D�az: %22El aborto tiene algo que ver con ETA%22' 
							, desc: 'El%2Bministro%2Bdel%2BInterior%252C%2BJorge%2BFern%25E1ndez%2BD%25EDaz%252C%2Bha%2Bafirmado%2Besta%2Bma%25F1ana%2Bdurante%2Bsu%2Brueda%2Bde%2Bprensa%2Bpara%2Binformar%2Bsobre%2Blas%2Bdetenciones%2Bde%2Bseis%2Bpresuntos%2Betarras%2Ben%2BFrancia%252C%2Bque%2Bel%2Baborto%2B%2522tiene%2Balgo%2Bque%2Bver%2522%2Bcon%2BETA%252C%2B%2522pero%2Bno%2Bdemasiado%2522.'
							, src : src
							, srcHTML5 : srcHTML5
							, poster: poster
                            , live: live
							, cdn: { provider:provider}	 
						} 
				
				playerConfig.ads = {};
				playerConfig.ads.conf = confPubli;
				playerConfig.ads.tags = "SER_RADIO";  

				playerConfig.player = {};
				playerConfig.player.container = "media_player_container";
				playerConfig.player.mode = mode;
				playerConfig.player.autoplay = autoplay;
				 
				playerConfig.skin = {};
				playerConfig.skin.id = skin;
				playerConfig.skin.volumeControl = "true";
				playerConfig.skin.html5 = skinHTML5;
				
				mediaPlayer = new psd.media.SimpleMediaPlayer(playerConfig);
				mediaPlayer.addEventListener(psd.media.MediaEvent.MEDIA_BEGIN, onMediaBegin, mediaPlayer);
				mediaPlayer.addEventListener(psd.media.MediaEvent.MEDIA_COMPLETE, onMediaComplete);
				mediaPlayer.addEventListener(psd.media.MediaEvent.CUEPOINT_DATA, onCuePointData);
				mediaPlayer.addEventListener(psd.media.MediaEvent.INITIALIZED, onMediaPlayerInitialized);
				mediaPlayer.addEventListener(psd.media.MediaEvent.MEDIA_START, onMediaPlayerStart);
				mediaPlayer.addEventListener(psd.media.MediaEvent.MEDIA_STOP, onMediaPlayerStop);
				mediaPlayer.addEventListener(psd.media.MediaEvent.AD_START, onMediaAdStart);
				mediaPlayer.addEventListener(psd.media.MediaEvent.AD_SKIP, onMediaAdSkip);
				mediaPlayer.addEventListener(psd.media.MediaEvent.AD_COMPLETE, onMediaAdStop);
				mediaPlayer.addEventListener(psd.media.MediaEvent.AD_COMPANION_ON, onAdCompanionOn);
				mediaPlayer.addEventListener(psd.media.MediaEvent.AD_COMPANION_OFF, onAdCompanionOff); 
				mediaPlayer.init();
			}
			
			
			
			function onMediaComplete(){}
			
			function onMediaPlayerInitialized(){}
			
			function onMediaBegin(evt){}
			
			function onCuePointData(evt){}
			
			function onMediaPlayerStart(){}
			
			function onMediaPlayerStop(){}
			
			function onMediaAdStart(evt){}
			
			function onMediaAdSkip(evt){}
			
			function onMediaAdStop(){}
			
			function onAdCompanionOn(evt) {}
			
			function onAdCompanionOff(){}
			
			function onCompanion()
			{
				mediaPlayer.isPlaying();
			}	
			
			var getUrlVars = function(v) {
				var vars = {};
				var parts = window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi, function(m,key,value) {
					vars[key] = value;
				});
				if(v==undefined) {
					return vars;
				} else {
					if(vars[v] !== undefined) {
						return vars[v];
					} else {
						return false; 
					}
				}
			}
			
		</script>
		
	</body> 
</html>