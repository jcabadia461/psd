<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title></title>
    <script type="text/javascript" src="../js/TopPlayer.lib.js"></script>
    <script src='http://www.alten-formacion.es/playser/js/vendor/jquery-1.11.0.min.js'></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.2/jquery-ui.min.js"></script>
</head>
<body>
    <div id="top_container" style="overflow: hidden;margin:auto;height: 515px;width:640px;"></div> <!--640x480-->
    <div id="ad_container" style="overflow: hidden;height: 480px;width:640px;margin:auto;"></div> <!--640x480-->
    <div id="topui_container" style="overflow: hidden;margin:auto;height:100px;width:640px;"></div> <!--640x480-->
    <div id="topui_container2" style="overflow: hidden;margin:auto;height:100px;width:640px;"></div> <!--640x480-->
    <div id="media_container" style="overflow: hidden;height: 0px;width:0px;margin:auto;display:none"></div> <!--640x480-->
    <script>

        

        		
        var pl = new emic.top.TopPlayer();
        mm = pl.getMediaModule();
        aa = pl.getAdModule();
        ui = pl.getUIModule();

        mm.addEventListener(emic.top.event.MediaEvent.ON_READY, onMediaHandler);
        mm.addEventListener(emic.top.event.MediaEvent.ON_CUE, onMediaHandler);
        mm.addEventListener(emic.top.event.MediaEvent.ON_ERROR, onMediaHandler);
        mm.addEventListener(emic.top.event.MediaEvent.ON_AD_INSTREAM_START, onMediaHandler);
        mm.addEventListener(emic.top.event.MediaEvent.ON_AD_INSTREAM_END, onMediaHandler);
        mm.addEventListener(emic.top.event.MediaEvent.ON_STATUS_CHANGE, onMediaHandler);
        mm.addEventListener(emic.top.event.MediaEvent.ON_SWITCH_REQUEST, onMediaHandler);
        mm.addEventListener(emic.top.event.MediaEvent.ON_SWITCH_COMPLETE, onMediaHandler);
	    mm.addEventListener(emic.top.event.MediaEvent.ON_PRELOAD_CONTROLLER_COMPLETE, onMediaHandler);	
        aa.addEventListener(emic.top.event.AdEvent.ON_AD_INSTREAM_START, onAdHandler);
        aa.addEventListener(emic.top.event.AdEvent.ON_AD_INSTREAM_END, onAdHandler);
        aa.addEventListener(emic.top.event.AdEvent.ON_AD_VIDEO_START, onAdHandler);
        aa.addEventListener(emic.top.event.AdEvent.ON_AD_VIDEO_END, onAdHandler);

        var config = {};
        config.generic = {container: "top_container", id:"topTest"};
        config.ui = {
          skin: emic.top.UIModule.SKIN_MERISTATION,
          poster: "http://notmykids.net/assets/video/big_buck_bunny.jpg",
          overrideNativeControls: true,
          showPreview: false,
          skinData:{
		      	previewMode : "normal"
          }
        };

        config.ad = {
                container: "",
                conf:"confs/pub/confPubli2.json",
                pTags: "madrid,deportes",
                enabled:false
        };
        
        config.stat = {
            enabled:true,
            extraData:{
                canal: "CanalPrueba",
                seccionTematica: "Sección Temática prueba",
                programa: "Programa prueba",
                seccion: "Sección prueba",
                objeto_ed: "Objeto editorial prueba",
                id_usuario: "Userid prueba",
                titulo_pagina: "Título página prueba",
                id:"myId",
                seccion_escucha: "Sección escucha prueba"
            }
        };

        config.media = {
            controllerPriority: [emic.top.MediaModule.CONTROLLER_TYPE_AKAMAIHDS, emic.top.MediaModule.CONTROLLER_TYPE_HTML5NATIVE],
            tecPriorityPC: [emic.top.MediaModule.TECHNOLOGY_FLASH],
            renditions: [ {"bitrate" : "1128", "label" : "1080p"}, 
                      {"bitrate" : "548", "label" : "720p"},
                      {"bitrate" : "548", "label" : "480p"},
                      {"bitrate" : "282", "label" : "Auto"}],
            autoplay: false,
            title:"VIDEO EJEMPLO PARA EL SKIN",
            id:"myId",
	        duration:256,
            controllerData: {},
            url:'http://meristation-vh.akamaihd.net/z/topmeri/20146/10/bfb1403dbb8f3e6726a2f40c3a74fddc_,500,1000,3000,.mp4.csmil/manifest.f4m',
            mimetype:"video/mp4"
        };

        emic.top.debugTop = true;
        emic.top.externalConsole = "consola";
        pl.init(config);

        var plui = new emic.top.TopUIPlayer();

        function onMediaHandler(e){

            console.log("MEDIA Evento test:", e.type);

            switch (e.type){

                case emic.top.event.MediaEvent.ON_READY:
                    //pl.config({media:{id:'RHOZFM'}});
                    //pl.config({media:{id:'LOS40'}});
                    console.log("REady!!!");
                    //mm.play();
                break;
                case emic.top.event.MediaEvent.ON_STATUS_CHANGE:
                    console.log("STATUS: ",mm.getStatus());
                break;
                case emic.top.event.MediaEvent.ON_CUE:
                    console.log('Artist: ' + ev.data.cuePoint.artistName + '<BR>Title: ' + ev.data.cuePoint.cueTitle);
                break;
            }
        }
        
        function onAdHandler(e){
            console.log("AD Evento test:", e.type, e.data, e.id);
            switch (e.type){

                case emic.top.event.AdEvent.ON_AD_INSTREAM_START:
                    try{
                        document.getElementById(e.id).style.display = "";
                    } catch (e){
                    }
                break;
                case emic.top.event.AdEvent.ON_AD_INSTREAM_END:
                    try{
                        document.getElementById(e.id).style.display = "none";
                    } catch (e){
                    }
                break;
                case emic.top.event.AdEvent.ON_AD_VIDEO_START:
                break;
                case emic.top.event.AdEvent.ON_AD_VIDEO_END:
                break;
            }
        }



    </script>
</body>
</html>
