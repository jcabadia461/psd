<!DOCTYPE html>
<html>
<head>
	<title>SUPERTEST - dmena@clb.prisadigital.com</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta charset="utf-8" />

<script>
dmena = 1;
</script>

<script src='http://assets.adobedtm.com/577c3689ea990d22d8d98c00c4aa568bec64a426/satelliteLib-fb2e2a793dcfc2101758e38b035acde4539c384d.js'></script>

</head>
<style>

body{
	font-family:Arial;
	padding:10px;
	width:100%;
}

select{
	width:100%;
}

input[type=submit]{
	padding:10px;
	border:none;
	background:#333;
	color:white;
	font-size:20px;
	border-radius:10px;
	margin:10px 0;
	cursor:pointer;
}

input[type=button]{
    padding:10px;
    border:none;
    background:#ff3607;
    color:white;
    font-size:20px;
    border-radius:10px;
    margin:10px 0;
	cursor:pointer;
}

hr{
	border:1px dashed #aaa
}

.tabla{
	width:50%;
}

.tabla td{
	min-width: 40px;
	padding-left:6px !important;
	padding-top:3px;
}

</style>

<script>
//mm_dist = "lalelilo";
//dwnlurl = "yayaya";
</script>
<body>
<div class='ocultable' id='cuidadotplib' style='width:100%;background:gold;text-align:center;padding:10px 0;display:none;' class='ocultable'>
Atenci칩n: TPLib activado. Desactivar para probar el .min (el que se sube a <b>produci칩n</b>)
</div>

<script type="text/javascript" src="http://ep01.epimg.net/js/comun/ot/s_code.js"></script>

	<form method='get' action='SUPERTEST.html' class='ocultable'>
		<table class='tabla'>
			<tr>
				<td>Id player</td>
				<td><input type='text' name='idplayer' id='idplayer'/></td><td></td>
            	<td>debug</td><td><input type='checkbox' id='debug' name='debug' onchange='activardebug(this)'></td>
				<td>Otros</td>
				<td><input name='otros' id='_otros'></td>
			</tr>
            <tr>
                <td>Id cuenta</td>
                <td><input type='text' name='idcuenta' id='idcuenta'/></td><td></td>
            	<td>usar consola en p치gina</td><td><input type='checkbox' checked=true id='usarconsola' name='usarconsola'></td>
            </tr>
            <tr>
                <td>Id media</td>
                <td><input type='text' name='idmedia' id='idmedia'/></td><td></td>
				<td id='tplib_txt'>librer칤a maximizada</td><td id='tplib_check'><input type='checkbox' id='tplib_' name='tplib_'></td>

            </tr>
            <tr>
                <td>Id media type</td>
                <td><select name='mediatype' id='mediatype'><option value='video'>video</option><option value='audio'>audio</option></select></td><td></td>
                <td>Usar capa de publicidad externa</td><td><input type='checkbox' id='publiext' name='publiext'></td>
            </tr>
			<tr>
				<td>Keep Alive</td>
				<td><input type='text' name='keepalive' id='keepalive' value='0'/></td><td></td>
                <td>Cargar Top de mi m치quina</td><td id='mmbase_check'><input type='checkbox' id='mmbase_' name='mmbase_'></td>
			</tr>
			<tr><td>dev</td><td><select name='dev' id='dev'><option value='true'>true</option><option value='false'>false</option></select></td><td></td>
				<td>Premuted</td><td id='premuted_check'><input type='checkbox' id='premuted' name='premuted'></td>
			</tr>
			<tr><td>entorno</td><td>
				<select name='entorno' id='entorno'>
					<option style='color:purple;' name='local'>local</option>
					<option style='color:red;' name='pro'>pro</option>
					<option style='color:orange;' name='pre'>pre</option>
					<option style='color:green;' name='desarrollo'>des</option>
					<option style='color:blue;' name='ftp'>ftp</option>
				</select>
			</td><td></td>
			<td>Autoplay</td><td id='autoplay_check'><input type='checkbox' id='autoplay' name='autoplay'></td>
			</tr>
		</table>
		<input type='submit' value='Dame el player!'/>
        <input type='button' value='Reset' onclick='resetea()'/>
        <input type='button' onclick='evaluar()' value='Eval'/>
		<input type='button' value='play desde boton' onclick='doplay()'/>
		<input type='button' value='mostrar/ocultar' onclick='showhide()'/>
	</form>


<div id="contenedor_video" style='width:600px;height:450px;'></div>
<div id="contenedor_audio" style='width:100%;height:300px;'></div>
<div id="contenedor_publi" style='width:calc(100% - 800px);height:450px;background:#fabada'></div>

<select class='ocultable'  onchange='docargar(selectedIndex)' style='position:fixed;right:10px;top:20px;width:440px;font-size:16px;color:#555;'>
<option> Predefinidos:</option>
<option disabled style='color:white;background:#333'>PRODUCCI츑</option>
<option>PlaySER audio directo</option>
<option>PlaySER audio enlatado</option>
<option>ElPa칤s 츣eo</option>
<option>FMDOS audio</option>
<option>YU v칤deo</option>
<option>Caracol audio</option>
<option>EPS v츣eo</option>
<option>Motor v칤deo</option>
<option>Cadenadial video</option>
<option>SMODA v칤deo</option>
<option>LATAM Radioacktiva</option>
<option>LATAM Los40colombia</option>
<option>m80radio audio</option>
<option>CadenaSER audio</option>
<option>LATAM FM2</option>
<option>LATAM Rock&Pop</option>
<option>LATAM Coraz칩n</option>
<option>LATAM Los40Chile</option>
<option>Huffington v칤deo</option>
<option>Podium audio</option>
<option>Podium Widget audio</option>
<option>EL COMIDISTA video youtube</option>
<option>Demo YOUTUBE OOCULTO</option>
<option>HERTZ</option>
<option>HERTZ sin transcripcion</option>
<option disabled style='color:white;background:#333'>INTEGRACI칩N</option>
<option>EPS audio</option>
<option>Elpa칤s Aniversario 40 츣eo</option>
<option>LOS40 Colombia audio</option>
<option>Cadenadial audio</option>
<option>PlaySER audio</option>
<option>LATAM Radioacktiva Colombia</option>
<option>LOS40 50 aniversario audio</option>
<option>LOS40 50 aniversario v칤deo</option>
<option>Motor v칤deo</option>
<option>Podcasts</option>
<option>Podcasts widget</option>
<option>MaximaFM audio</option>
<option>Radiole audio</option>
<option>MaximaFM video</option>
<option>Radiole video</option>
<option>LATAM UNO</option>
<option>M80 v칤deo</option>
<option>youtube</option>
<option>prueba final youtube</option>
<option>DEMO se침al geobloqueada</option>
<option>DEMO se침al sin vigencia</option>
</select>

<div class='ocultable' style='position:fixed;right:10px;top:50px;width:450px;'>
<h3  class='ocultable' style='position:relative;'>Consola: <span onclick='document.getElementById("consola").innerHTML = ""' id='borrarconsola' style='position:absolute;right:5px;'>&#x2716;</span></h3>
</div>

<div id='consola' class='ocultable'  style='position:fixed;width:450px;height:50%;background:#ccc;top:100px;right:0;overflow:scroll;padding:10px;font-family:Arial'>
</div>


<script type="text/javascript">
RRR =false;
window.mm_suites_pre = true;
//mm_timeout_mbl = true;
//SOYRESET = false;
//mm_autoplay = false;
//_first = true;

if(window.location.search.indexOf("ocultar")>-1){
	var oc = document.getElementsByClassName("ocultable");
	for(o=0;o<oc.length;o++){
		if(typeof(oc[o].style!="undefined")){
			oc[o].style.visibility = "hidden";
			oc[o].style.display = "none";
		}
	}
}

function docargar(index){
    if(index==0)
        return;

    var configs = [
        {},
		{},
        {"idcuenta":"playser","idplayer":71,"idmedia":"radio_madrid","dev":false,"mediatype":"audio"},
		{"idcuenta":"playser","idplayer":71,"idmedia":"cadenaser_carruseldeportivo_20141130_200000_210000","dev":false,"mediatype":"audio"},
        {"idcuenta":"elpais","idplayer":113,"idmedia":"channel1ak","dev":false,"mediatype":"video"},
        {"idcuenta":"fmdoschile","idplayer":159,"idmedia":"fm_dos","dev":false,"mediatype":"audio"},
        {"idcuenta":"los40videos","idplayer":67,"idmedia":"YuNotePierdasNada2016","dev":false,"mediatype":"video"},
        {"idcuenta":"caracol","idplayer":66,"idmedia":"caracol_radio_6amhoyporhoy_20160323_070000_080000","dev":false,"mediatype":"audio"},
        {"idcuenta":"elpais","idplayer":154,"idmedia":"c09e8b53c6cf4e23ed2f689cbf26e7d7","dev":false,"mediatype":"video"},
        {"idcuenta":"motor","idplayer":143,"idmedia":"56dff5eaeebd0","dev":false,"mediatype":"video"},
        {"idcuenta":"cadenadial","idplayer":138,"idmedia":"20160330172642","dev":false,"mediatype":"video"},
        {"idcuenta":"smoda","idplayer":131,"idmedia":"20160113163018","dev":false,"mediatype":"video"},
        {"idcuenta":"radioacktivacolombia","idplayer":163,"idmedia":"medellin","dev":false,"mediatype":"audio"},
		{"idcuenta":"los40colombia","idplayer":147,"idmedia":"los40_colombia","dev":false,"mediatype":"audio"},
        {"idcuenta":"m80radio","idplayer":157,"idmedia":"20160411141328","dev":false,"mediatype":"audio"},
        {"idcuenta":"playser","idplayer":80,"idmedia":"033RD010000000020111","dev":false,"mediatype":"audio"},
        {"idcuenta":"fmdoschile","idplayer":159,"idmedia":"fm_dos","dev":false,"mediatype":"audio"},
        {"idcuenta":"rockpopchile","idplayer":158,"idmedia":"rock___pop","dev":false,"mediatype":"audio"},
        {"idcuenta":"corazonchile","idplayer":164,"idmedia":"santiago_de_chile","dev":false,"mediatype":"audio"},
        {"idcuenta":"los40chile","idplayer":155,"idmedia":"40_principales","dev":false,"mediatype":"audio"},
        {"idcuenta":"huffingtonpost","idplayer":20,"idmedia":"20150717190144","dev":false,"mediatype":"video"},
		{"idcuenta": "podium", "idplayer": 177, "idmedia": "20160607172215", "dev":false,"mediatype" : "audio"},
        {"idcuenta": "podium", "idplayer": 180, "idmedia": "20160607172215", "dev":false,"mediatype" : "audio"},
        {"idcuenta": "elpais", "idplayer": 141, "idmedia": "20161125175210", "dev":false,"mediatype" : "video"},
        {"idcuenta": "demo", "idplayer": 181, "idmedia": "20161213153621", "dev":false,"mediatype" : "video"},
        {"idcuenta": "demo", "idplayer": 241, "idmedia": "20161229133554693", "dev":false,"mediatype" : "audio"},
        {"idcuenta": "demo", "idplayer": 241, "idmedia": "1480623401_398210", "dev":false,"mediatype" : "audio"},
		{},
        {"idcuenta":"elpais","idplayer":146,"idmedia":"20160322155618","dev":true,"mediatype":"audio"},
        {"idcuenta":"elpais","idplayer":129,"idmedia":"20160219183911","dev":true,"mediatype":"video"},
        {"idcuenta":"los40colombia","idplayer":135,"idmedia":"LOS40","dev":true,"mediatype":"audio"},
        {"idcuenta":"cadenadial","idplayer":131,"idmedia":"CADENADIAL","dev":true,"mediatype":"audio"},
        {"idcuenta":"playser","idplayer":71,"idmedia":"radio_madrid","dev":true,"mediatype":"audio"},
        {"idcuenta":"radioacktivacolombia","idplayer":149,"idmedia":"20160401115307","dev":true,"mediatype":"audio"},
        {"idcuenta":"los40","idplayer":161,"idmedia":"20160420101609","dev":true,"mediatype":"audio"},
		{"idcuenta":"los40","idplayer":162,"idmedia":"f7b8f1466b710e94efede1da9e31f930","dev":true,"mediatype":"video"},
        {"idcuenta":"motor","idplayer":140,"idmedia":"56dff4c96824d","dev":true,"mediatype":"video"},
        {"idcuenta":"podium","idplayer":168,"idmedia":"20160511161639","dev":true,"mediatype":"audio"},
        {"idcuenta":"podium","idplayer":170,"idmedia":"20160511161639","dev":true,"mediatype":"audio"},
        {"idcuenta":"maximafm","idplayer":180,"idmedia":"20160118105807","dev":true,"mediatype":"audio"},
        {"idcuenta":"radiole","idplayer":181,"idmedia":"20160118105552","dev":true,"mediatype":"audio"},
        {"idcuenta":"maximafm","idplayer":182,"idmedia":"20160418124643","dev":true,"mediatype":"video"},
        {"idcuenta":"radiole","idplayer":152,"idmedia":"20160415144416","dev":true,"mediatype":"video"},
        {"idcuenta":"radiounochile","idplayer":183,"idmedia":"uno","dev":true,"mediatype":"audio"},
        {"idcuenta":"m80radio","idplayer":142,"idmedia":"20160316140725","dev":true,"mediatype":"video"},
        {"idcuenta":"demo","idplayer":2,"idmedia":"20160511155108","dev":true,"mediatype":"video"},
        {"idcuenta":"elpais","idplayer":109,"idmedia":"20161006175618","dev":true,"mediatype":"video"},
		{"idcuenta":"demo","idplayer":147,"idmedia":"20161003095642","dev":true,"mediatype":"video"},
		{"idcuenta":"demo","idplayer":147,"idmedia":"20161010114809","dev":true,"mediatype":"video"}
    ]

	cargar(configs[index]);
}

function cargar(params){
        document.getElementById('idcuenta').value = params.idcuenta;
        document.getElementById('idplayer').value = params.idplayer;
        document.getElementById('idmedia').value = params.idmedia;
        document.getElementById('dev').value = params.dev;
        document.getElementById('mediatype').value = params.mediatype;
}

	function activardebug(ttt){
	    if(ttt.checked==true){
    	    emic.top.debugTop = true;
			emic.top.debug = console.log;
		}
        else
            emic.top.debugTop = false;
	}

	function getget(name,url) {
	    if (!url) url = window.location.href;
	    //url = url.toLowerCase(); // This is just to avoid case sensitiveness  
	    name = name.replace(/[\[\]]/g, "\\$&");// This is just to avoid case sensitiveness for query parameter name
	    var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
	        results = regex.exec(url);
	    if (!results) return null;
	    if (!results[2]) return '';
	
	    return decodeURIComponent(results[2].replace(/\+/g, " "));
	}

	var urlsimple = "";

//mm_lang = "pt-br";

	if(getget("idplayer")!=null){

        var sss ="http://player-top.prisasd.com/psdmedia/media/simple/js/lib/SimpleMediaPlayer.lib.js";

        if(getget("tplib_")=="on"){
            window.tplib = true;
            document.getElementById("tplib_").checked = true;
            document.getElementById("tplib_check").style.background = "gold";
            document.getElementById("tplib_txt").style.background = "gold";
            document.getElementById("cuidadotplib").style.display = "block";
        }else{
			window.tplib = undefined;
		}

		document.getElementById("_otros").value = getget("otros");;

		if(getget("mmbase_")=="on"){
			window.mm_base = true;
			document.getElementById("mmbase_").checked = true;
		}


		if(getget("publiext")=="on"){
            document.getElementById("publiext").checked = true;
        }

		if(getget("premuted")=="on"){
            document.getElementById("premuted").checked = true;
        }

        if(getget("autoplay")=="on"){
            document.getElementById("autoplay").checked = true;
        }

		switch(getget("entorno")){
			case "pre":
                sss="http://playerint.top.prisasd.com/psdmedia/media/simple/js/lib/SimpleMediaPlayer.lib.js";
			break;
			case "des":
                sss="/psdmedia/media/simple/js/lib/SimpleMediaPlayer.lib.js";
			break;
			case "ftp":
				sss="http://playerdes.top.prisasd.com/psdmedia/media/simple/js/lib/SimpleMediaPlayer.lib.js";
			break;
			case "local":
				sss="http://localhost/psdmedia/media/simple/js/lib/SimpleMediaPlayer.lib.js";
			break;
		}

		var ss = document.createElement("script");
		ss.type = "text/javascript";
		ss.src = sss;
		ss.onload = function(){ hacer();};
		document.head.appendChild(ss);

		document.getElementById('idcuenta').value = getget("idcuenta");
		document.getElementById('idplayer').value = getget("idplayer");
		document.getElementById('idmedia').value = getget("idmedia");
		document.getElementById('dev').value = getget("dev");
		document.getElementById('mediatype').value = getget("mediatype");
        document.getElementById('entorno').value = getget("entorno");
		document.getElementById('keepalive').value = getget("keepalive");

		hacer = function(){

//ll = new psd.media.Lang();
//aa = ll.translate("pt-br","no_disponible");

		idcontainer = "contenedor_video";
		if(getget("mediatype")=="audio"){
			idcontainer = "contenedor_audio";
			document.getElementById("contenedor_video").style.display = "none";
		}

		//document.getElementById(idcontainer).style.background = "#999988";

		var topPlayer = {};
	
		if(getget("keepalive")>0){
			topPlayer.stat = {mediaTimer:{enable:true, segundos:getget("keepalive")}};
		}
		if(document.getElementById("publiext").checked)
			topPlayer.ad = {"container":"contenedor_publi"};
		if(document.getElementById("premuted").checked)
			topPlayer.media = {"premuted":true};
        if(document.getElementById("autoplay").checked)
            topPlayer.media = {"autoplay":true};

if(typeof(topPlayer.ad)=="undefined")
	topPlayer.ad = {};	

//topPlayer.ad.enabled = false;
mm_timevideo_ad = 60;

		superparams = {
   	        "dev": JSON.parse(getget("dev")),
            "id_cuenta": getget("idcuenta"),
            "id_player": getget("idplayer"),
            "id_media": getget("idmedia"),
            "media_type" : getget("mediatype"),
            "id_container": idcontainer,
			"topPlayer":topPlayer
       };
   
		console.log("generando player con configuraci蚤 ",superparams);

		rui = function(){
			console.log("Inicializado TopEmbed");

	        if(getget("debug")=="on"){
	            emic.top.debugTop = true;
	            document.getElementById("debug").checked = true;

				if(getget("usarconsola")=="on")
					emic.top.debug = console.log;

	        }

			function onAdEvent(ev){
 			   console.log("ADDDDDDDDDDDDDDEVENTTTTTT",ev.type);
/*
		    switch(ev.type){
		        case emic.top.event.AdEvent.ON_AD_VIDEO_START:
			        document.getElementById("preRoll").style.visibility = "visible";
		        break;
		        case emic.top.event.AdEvent.ON_AD_VIDEO_END:
		            document.getElementById("preRoll").style.visibility = "hidden";
		        break;
		        case emic.top.event.AdEvent.ON_AD_INSTREAM_START:
		            document.getElementById("preRoll").style.visibility = "visible";
		            document.getElementById("ppp").style.display = "none";
		        break;
		        case emic.top.event.AdEvent.ON_AD_INSTREAM_END:
		            document.getElementById("preRoll").style.visibility = "hidden";
		            document.getElementById("ppp").style.display = "";
		        break;
		 	   }
*/
			}
			ad = mediaTopEmbed.getMediaPlayer().getAdModule();
		    ad.addEventListener(emic.top.event.AdEvent.ON_AD_INSTREAM_START,onAdEvent);
		    ad.addEventListener(emic.top.event.AdEvent.ON_AD_INSTREAM_END,onAdEvent);
		    ad.addEventListener(emic.top.event.AdEvent.ON_AD_VIDEO_START,onAdEvent);
		    ad.addEventListener(emic.top.event.AdEvent.ON_AD_VIDEO_END,onAdEvent);

			onStatusChange = function(ev){
			console.log(ev);
			}

			mm = mediaTopEmbed.getMediaPlayer().getMediaModule();
			mm.addEventListener(emic.top.event.MediaEvent.ON_STATUS_CHANGE,onStatusChange);
		}

	    mediaTopEmbed = new psd.media.TopEmbed(superparams);
		mediaTopEmbed.addEventListener(psd.media.TopEmbedEvent.EVENT_INI,rui);

	}

	if(getget("usarconsola")=="on"){
		console.log = function(e1,e2){
	
	    if(e2==undefined)
	        e2 = "";
	
	    if(typeof(e2)=="object"){
	        e2 = JSON.stringify(e2);
	    }
	
		ddd = new Date();

	    document.getElementById("consola").innerHTML = document.getElementById("consola").innerHTML + "<span style='color:blue;'>" + ddd.getHours() + ":" + ddd.getMinutes() + ":" + ddd.getSeconds() + "</span><br><span style='color:#734582'>" + e1 + "</span><br><span style='#333'>" + e2 + "</span><hr>";	
	}
	}else{
		document.getElementById("consola").style.display = "none";
		document.getElementById("usarconsola").checked = false;
	}

	evaluar = function(){
		var expresion = prompt("Expresi蚤 a avaluar", "");

		if(expresion!=null){
			console.log(expresion + ":",eval(expresion));
		}
	}

    doplay = function(){
        mediaTopEmbed.getMediaPlayer().getMediaModule().play();
    }
	
	showhide = function(){
		
		divui = document.getElementById("UISkin_" + idcontainer + "_TopPlayer");
		console.log(divui);
		
		if(divui.style.display=="none"){
			divui.style.display = "block";
		}else{
			divui.style.display = "none";
		}
	}

	resetea = function(){

/*
		if(_first){
if((mm_autoplay)&&(typeOf(mm_autoplay)!="undefined)){
if(mm_autoplay){
console.log(1);
			mediaTopEmbed.getMediaPlayer().getMediaModule().play();
            mediaTopEmbed.getMediaPlayer().getMediaModule().pause();
console.log(2);
_first = false;
		}}};
*/
        var topPlayer = {};

RRR = true;

        if(getget("keepalive")>0){
            topPlayer.stat = {mediaTimer:{enable:true, segundos:getget("keepalive")}};
        }
        if(document.getElementById("publiext").checked)
            topPlayer.ad = {"container":"contenedor_publi"};
        if(document.getElementById("premuted").checked)
            topPlayer.media = {"premuted":true};
        if(document.getElementById("autoplay").checked)
            topPlayer.media = {"autoplay":true};

        var params = {
            "dev": document.getElementById("dev").value,
            "id_cuenta": document.getElementById("idcuenta").value,
            "id_player": document.getElementById("idplayer").value,
            "id_media": document.getElementById("idmedia").value,
            "media_type" : document.getElementById("mediatype").value,
			"topPlayer": topPlayer
       };

		superparams.id_media = document.getElementById("idmedia").value;

        console.log("reset del player con configuraci蚤 ",superparams);

        mediaTopEmbed.reset(superparams);
	}
}

window.onresize = function(){
console.log(3333);
}

</script>

</body>
</html>