(function(a){if(a.psd==undefined){a.psd={}}if(a.psd.fenix==undefined){a.psd.fenix={}}if(a.psd.fenix.controls==undefined){a.psd.fenix.controls={}}if(a.psd.fenix.display==undefined){a.psd.fenix.display={}}if(a.psd.fenix.display.commands==undefined){a.psd.fenix.display.commands={}}if(a.psd.fenix.event==undefined){a.psd.fenix.event={}}if(a.psd.fenix.media==undefined){a.psd.fenix.media={}}if(a.psd.fenix.stage==undefined){a.psd.fenix.stage={}}if(a.psd.fenix.text==undefined){a.psd.fenix.text={}}if(a.psd.fenix.textures==undefined){a.psd.fenix.textures={}}})(window);(function(b){a._nextID=0;a.getKeyId=function(){return a._nextID++};function a(){}b.UID=a})(psd.fenix);(function(a){b.colorToRGB=function(e,i){if(typeof e==="string"&&e[0]==="#"){e=window.parseInt(e.slice(1),16)}i=(i===undefined)?1:i;var h=e>>16&255,f=e>>8&255,c=e&255,d=(i<0)?0:((i>1)?1:i);if(d===1){return"rgb("+h+","+f+","+c+")"}else{return"rgba("+h+","+f+","+c+","+d+")"}};function b(){}a.ColorUtil=b})(psd.fenix);(function(a){b.containsPoint=function(d,c,e){return !(c<d.x||c>d.x+d.width||e<d.y||e>d.y+d.height)};b.intersects=function(d,c){return !(d.x+d.width<c.x||c.x+c.width<d.x||d.y+d.height<c.y||c.y+c.height<d.y)};function b(){}a.MathUtil=b})(psd.fenix);(function(a){function b(c,d){this.x=c|0;this.y=d|0;this.clone=function(){return new b(this.x,this.y)};this.add=function(e){return new b(this.x+e.x,this.y+e.y)};this.degreesTo=function(g){var f=this.x-g.x;var e=this.y-g.y;var h=Math.atan2(e,f);return h*(180/Math.PI)};this.distance=function(f){var e=this.x-f.x;var g=this.y-f.y;return Math.sqrt(e*e+g*g)};this.equals=function(e){return this.x==e.x&&this.y==e.y};this.interpolate=function(g,e){return new b((this.x+g.x)*e,(this.y+g.y)*e)};this.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)};this.normalize=function(f){var e=this.length();this.x=this.x/e*f;this.y=this.y/e*f};this.orbit=function(f,e,g,i){var h=i*(Math.PI/180);this.x=f.x+e*Math.cos(h);this.y=f.y+g*Math.sin(h)};this.offset=function(f,e){this.x+=f;this.y+=e};this.subtract=function(e){return new b(this.x-e.x,this.y-e.y)};this.toString=function(){return"(x="+this.x+", y="+this.y+")"};b.interpolate=function(h,g,e){return new b((h.x+g.x)*e,(h.y+g.y)*e)};b.polar=function(e,f){return new b(e*Math.sin(f),e*Math.cos(f))};b.distance=function(g,f){var e=g.x-f.x;var h=g.y-f.y;return Math.sqrt(e*e+h*h)}}a.Point=b})(psd.fenix);(function(b){function a(d,e,c){this.x=d|0;this.y=e|0;this.r=c|1;this.clone=function(){return new a(this.x,this.y,this.r)};this.toString=function(){return"(x="+this.x+", y="+this.y+", radius="+this.r+")"}}b.Girth=a})(psd.fenix);(function(b){function a(d,f,e,c){this.x=d||0;this.y=f||0;this.width=e||1;this.height=c||1;this.clone=function(){return new a(this.x,this.y,this.width,this.height)};this.toString=function(){return"(x="+this.x+", y="+this.y+", width="+this.width+", height="+this.height+")"}}b.Rectangle=a})(psd.fenix);(function(b){a.prototype=new psd.framework.Event();a.ABORT="abort";a.BEGIN="begin";a.CAN_PLAY="canplay";a.CAN_PLAY_THROUGH="canplaythrough";a.DURATION_CHANGE="durationchange";a.EMPTIED="emptied";a.ENDED="ended";a.ERROR="error";a.LOADED_DATA="loadeddata";a.LOADED_METADATA="loadedmetadata";a.LOAD_START="loadstart";a.PAUSE="pause";a.PLAY="play";a.PLAYING="playing";a.PROGRESS="progress";a.RATE_CHANGE="ratechange";a.READY_STATE_CHANGE="readystatechange";a.SEEKED="seeked";a.SEEKING="seeking";a.STALLED="stalled";a.SUSPEND="suspend";a.TIME_UPDATE="timeupdate";a.VOLUME_CHANGE="volumechange";a.WAITING="waiting";this.data=null;function a(c,d){psd.framework.Event.call(this,c);this.data=d}b.MediaEvent=a})(psd.fenix.event);(function(b){a.prototype=new psd.framework.Event();a.CLICK="click";a.MOUSE_DOWN="mouseDown";a.MOUSE_UP="mouseUp";a.MOUSE_MOVE="mouseMove";a.MOUSE_OVER="mouseOver";a.MOUSE_OUT="mouseOut";this.stageX=0;this.stageY=0;this.localX=0;this.localY=0;function a(g,f,e,d,c){psd.framework.Event.call(this,g);this.stageX=f!=undefined?f:0;this.stageY=e!=undefined?e:0;this.localX=d!=undefined?d:0;this.localY=c!=undefined?c:0}b.MouseEvent=a})(psd.fenix);(function(a){b.prototype=new psd.framework.Event();b.CHANGE="change";this.data=null;function b(c,d){psd.framework.Event.call(this,c);this.data=d}a.ProgressEvent=b})(psd.fenix.event);(function(b){a.prototype=new psd.framework.Event();a.INIT="init";a.INIT_ERROR="initError";a.ADDED_TO_STAGE="addedToStage";a.REMOVED_FROM_STAGE="removedFromStage";a.ENTER_FRAME="enterFrame";a.ADDED="added";a.REMOVED="removed";a.RESIZE="resize";a.DISPLAY_STATE_CHANGE="displayStateChange";this.currentTarget=null;function a(c,d){psd.framework.Event.call(this,c);this.currentTarget=d}b.StageEvent=a})(psd.fenix);(function(a){b.prototype=new psd.framework.EventDispatcher();function b(d,j,o){psd.framework.EventDispatcher.call(this);this.className="psd.fenix.textures.TextureAtlas";var r=(o==true||o=="true")?true:false;var c=d;var f=false;var q=(function(s){return function(){m.apply(s)}})(this);var m=function(){f=true;if(l){this.dispatchEvent(new psd.framework.Event("texture_atlas_ready"))}};var n=null;var e=j;var l=false;var p=new psd.framework.Mediator();var g=function(s){if(r){n=s.result.parserResult.result}else{n=JSON.parse(s.result.parserResult.result)}l=true;if(f){this.dispatchEvent(new psd.framework.Event("texture_atlas_ready"))}};var h=function(s){Log.log("onMediateError: "+s)};var i=new psd.framework.Parser();var k=new Image();this.texture=function(){return k};this.getFrames=function(u){var t,s,w,v=[];if(u=="*"){v=n.frames}else{if(Object.prototype.toString.apply(u)!="[object Array]"){u=[u]}for(t in n.frames){w=n.frames[t];for(s in u){if(w.filename.indexOf(u[s])==0){v.push(w)}}}}return v};p.addEventListener(psd.framework.MediatorEvent.MEDIATE_COMPLETE,g,this);p.addEventListener(psd.framework.MediatorEvent.MEDIATE_ERROR,h,this);p.mediate(e,i,r?psd.framework.Mediator.RESPONSE_JSONP:psd.framework.Mediator.RESPONSE_JSON);k.onload=q;k.crossOrigin="anonymous";k.src=c}a.TextureAtlas=b})(psd.fenix.textures);(function(b){function a(c,f){this.className="psd.fenix.display.commands.BeginFillCommand";var e=c!=undefined?c:0;var d=f!=undefined?f:1;this.exec=function(g){g.closePath();g.fillStyle=psd.fenix.ColorUtil.colorToRGB(e,d);g.beginPath()}}b.BeginFillCommand=a})(psd.fenix.display.commands);(function(b){function a(h,d,c,i){this.className="psd.fenix.display.commands.BeginGradientFillCommand";var e=(h!=undefined&&(h=="linear"||h=="radial"))?h:"linear";var g=d!=undefined?d:[];var f=c!=undefined?c:[];var j=i!=undefined?i:[];this.exec=function(k){var m=e=="linear"?k.createLinearGradient(0,0,200,200):k.createRadialGradient(0,0,1,1,1,1),l;for(l in g){m.addColorStop(j[l],psd.fenix.ColorUtil.colorToRGB(g[l],f[l]))}k.closePath();k.fillStyle=m;k.beginPath()}}b.BeginGradientFillCommand=a})(psd.fenix.display.commands);(function(b){function a(g,d,c,j){this.className="psd.fenix.display.commands.CurveToCommand";var i=g!=undefined?g:0;var f=d!=undefined?d:0;var h=c!=undefined?c:0;var e=j!=undefined?j:0;this.exec=function(k){k.quadraticCurveTo(i,f,h,e);k.stroke()}}b.CurveToCommand=a})(psd.fenix.display.commands);(function(a){function b(d,h,c){this.className="psd.fenix.display.commands.DrawCircleCommand";var f=d!=undefined?d:0;var e=h!=undefined?h:0;var g=c!=undefined?c:0;this.exec=function(i){i.arc(f,e,g,0,2*Math.PI,false)}}a.DrawCircleCommand=b})(psd.fenix.display.commands);(function(b){function a(e,j,i,d){this.className="psd.fenix.display.commands.DrawRectCommand";var g=e!=undefined?e:0;var f=j!=undefined?j:0;var c=i!=undefined?i:0;var h=d!=undefined?d:0;this.exec=function(k){k.beginPath();k.fillRect(g,f,c,h);k.strokeRect(g,f,c,h);k.closePath()}}b.DrawRectCommand=a})(psd.fenix.display.commands);(function(a){function b(){this.className="psd.fenix.display.commands.EndFillCommand";this.exec=function(c){c.fill();c.stroke()}}a.EndFillCommand=b})(psd.fenix.display.commands);(function(b){function a(m,g,f,e,c,i){this.className="psd.fenix.display.commands.LineStyleCommand";var j=m!=undefined?m:0;var l=g!=undefined?g:0;var k=g!=undefined?f:1;var n=e!=undefined?e:"";var d=c!=undefined?c:"";var h=i!=undefined?i:0;this.exec=function(o){o.lineWidth=j;o.lineCap=n;o.lineJoin=d;o.miterLimit=h;o.strokeStyle=psd.fenix.ColorUtil.colorToRGB(l,k)}}b.LineStyleCommand=a})(psd.fenix.display.commands);(function(b){function a(c,f){this.className="psd.fenix.display.commands.LineToCommand";var e=c!=undefined?c:0;var d=f!=undefined?f:0;this.exec=function(g){g.lineTo(e,d);g.stroke()}}b.LineToCommand=a})(psd.fenix.display.commands);(function(b){function a(c,f){this.className="psd.fenix.display.commands.MoveToCommand";var e=c!=undefined?c:0;var d=f!=undefined?f:0;this.exec=function(g){g.closePath();g.beginPath();g.moveTo(e,d)}}b.MoveToCommand=a})(psd.fenix.display.commands);(function(b){a.prototype=new psd.framework.EventDispatcher();function a(){psd.framework.EventDispatcher.call(this);this.className="psd.fenix.DisplayObject";var c=[];this.draw=function(d){var e;d.save();d.beginPath();for(e=0;e<c.length;e++){c[e].exec(d)}d.closePath();d.restore()};this.beginFill=function(d,e){c.push(new psd.fenix.display.commands.BeginFillCommand(d,e))};this.beginGradientFill=function(f,e,d,g){c.push(new psd.fenix.display.commands.BeginGradientFillCommand(f,e,d,g))};this.clear=function(){c=[]};this.curveTo=function(f,e,d,g){c.push(new psd.fenix.display.commands.CurveToCommand(f,e,d,g))};this.drawCircle=function(e,f,d){c.push(new psd.fenix.display.commands.DrawCircleCommand(e,f,d))};this.drawRect=function(e,g,f,d){c.push(new psd.fenix.display.commands.DrawRectCommand(e,g,f,d))};this.endFill=function(){c.push(new psd.fenix.display.commands.EndFillCommand())};this.lineStyle=function(g,f,i,h,d,e){c.push(new psd.fenix.display.commands.LineStyleCommand(g,f,i,h,d,e))};this.lineTo=function(d,e){c.push(new psd.fenix.display.commands.LineToCommand(d,e))};this.moveTo=function(d,e){c.push(new psd.fenix.display.commands.MoveToCommand(d,e))}}b.Graphics=a})(psd.fenix.display);(function(b){a.prototype=new psd.framework.EventDispatcher();function a(){psd.framework.EventDispatcher.call(this);this.className="psd.fenix.DisplayObject";var o=psd.fenix.UID.getKeyId();var p=false;var l=0;var s=0;var v=0;var g=0;var u=0;var q=0;var d=null;var e=false;var t=function(w){r=w.currentTarget};this.addEventListener(psd.fenix.StageEvent.ADDED,t);var f=function(w){n=w.currentTarget;i=n.context2d()};this.addEventListener(psd.fenix.StageEvent.ADDED_TO_STAGE,f,this);this._prepareContext=function(w){if(w){w.translate(this.x,this.y);w.rotate(this.rotation);w.scale(k,h);w.globalAlpha=this.globalAlpha();if(this.scrollRect!=null){w.beginPath();w.rect(0,0,this.scrollRect.width,this.scrollRect.height);w.clip();w.translate(-this.scrollRect.x,-this.scrollRect.y)}}};this.name="instance_"+o;this.x=0;this.globalX=function(){if(this.className=="psd.fenix.Stage"){return 0}else{if(this.parent()==null){return this.x}else{return this.parent().globalX()+this.x*this.parent().scaleX()}}};this.y=0;this.globalY=function(){if(this.className=="psd.fenix.Stage"){return 0}else{if(this.parent()==null){return this.y}else{return this.parent().globalY()+this.y*this.parent().scaleY}}};this.z=0;this.width=function(w){if(w&&w!=s){s=w;p=false}if(!p){this.measure()}return v};this.height=function(w){if(w&&w!=u){u=w;p=false}if(!p){this.measure()}return q};var k=1;this.scaleX=function(w){if(w&&w!=k){k=w;p=false}return k};var h=1;this.scaleY=function(w){if(w&&w!=h){h=w;p=false}return h};this.rotation=0;this.alpha=1;var j=false;this.boundsDetection=function(w){if(w!=undefined){j=w}return j};this.globalAlpha=function(w){if(w&&w!=_alpha){_alpha=w}if(this.className=="psd.fenix.Stage"){return this.alpha}else{if(this.parent()==null){return 1}else{return this.parent().globalAlpha()*this.alpha}}};this.visible=true;this.mouseEnabled=true;this.buttonMode=false;this.useHandCursor=true;this.scrollRect=null;var n=null;this.stage=function(){return n};var r=null;this.parent=function(){return r};var i=null;this.context2d=function(){return i};var c=new psd.fenix.display.Graphics();this.graphics=function(){return c};this.invalidateSize=function(x,y){if(x!=null&&x!=undefined){l=x}if(y!=null&&y!=undefined){g=y}p=false;if(this.parent()!=null&&this.parent().className!="psd.fenix.Stage"){this.parent().invalidateSize()}};this.validateSize=function(x,y){if(!p){if(l!=0){x=l}if(g!=0){y=g}if(x==0){x=s}if(y==0){y=u}if(s!=0&&x!=0){k=s/x}if(u!=0&&y!=0){h=u/y}v=x*k;q=y*h;p=true;this.dispatchEvent(new psd.fenix.StageEvent(psd.fenix.StageEvent.RESIZE))}};this.measure=function(){this.validateSize(l,g)};this.render=function(w){if(!p){this.measure()}if(w!=null&&this.visible&&this.globalAlpha()>0){w.save();this._prepareContext.apply(this,[w]);this.graphics().draw(w);if(this._render){this._render(w)}w.restore()}};this.testHit=function(w,B){var A=false,z;if(this.visible){if(j){A=(w>=this.x&&w<=this.x+this.width()&&B>=this.y&&B<=this.y+this.height())}else{if(psd!=null&&psd.fenix!=null&&psd.fenix.hitContext!=null){z=psd.fenix.hitContext;z.clearRect(0,0,1,1);z.save();this._prepareContext(z);if(typeof(this._render)!="undefined"){this._render(z,true)}if(typeof(z.getImageData)!="undefined"){A=z.getImageData(0,0,1,1).data[3]>1}z.restore()}}}return A};var m=false;this.isMouseDown=function(w){if(w==true||w==false){m=w}return m};this.invalidateMouseStatus=function(w){this.updateMouseStatus(false,w,true)};this.calculateMouseStatus=function(x){var w=this.testHit(x.x,x.y);this.updateMouseStatus(w,x,false);return w};this.updateMouseStatus=function(w,x,y){if(this.className!="psd.fenix.Stage"){if(w){if(!e){e=true;if(!y){if(this.buttonMode&&this.useHandCursor){d=document.body.style.cursor;document.body.style.cursor="pointer"}}this.dispatchEvent(new psd.fenix.MouseEvent(psd.fenix.MouseEvent.MOUSE_OVER,x.x,x.y))}}else{if(e){e=false;if(!y){document.body.style.cursor=d;d=null}this.dispatchEvent(new psd.fenix.MouseEvent(psd.fenix.MouseEvent.MOUSE_OUT,x.x,x.y))}}}};this.calculateMouseDownStatus=function(x){var w=this.testHit(x.x,x.y);this.updateMouseDownStatus(w,x);return w};this.updateMouseDownStatus=function(w,x){if(x.down){if(w){if(!m){m=true;if(this.className!="psd.fenix.Stage"){this.dispatchEvent(new psd.fenix.MouseEvent(psd.fenix.MouseEvent.MOUSE_DOWN,x.x,x.y,x.x-this.globalX(),x.y-this.globalY()))}}}else{if(m){m=false;if(this.className!="psd.fenix.Stage"){this.dispatchEvent(new psd.fenix.MouseEvent(psd.fenix.MouseEvent.MOUSE_UP,x.x,x.y,x.x-this.globalX(),x.y-this.globalY()))}}}}else{if(m){m=false;if(this.className!="psd.fenix.Stage"){this.dispatchEvent(new psd.fenix.MouseEvent(psd.fenix.MouseEvent.MOUSE_UP,x.x,x.y,x.x-this.globalX(),x.y-this.globalY()))}}}}}b.DisplayObject=a})(psd.fenix);(function(a){b.prototype=new psd.fenix.DisplayObject();function b(){psd.fenix.DisplayObject.call(this);this.className="psd.fenix.DisplayObjectContainer";var d=function(f){var g,h=c.length;for(g=0;g<h;g++){c[g].dispatchEvent(new psd.fenix.StageEvent(psd.fenix.StageEvent.ADDED_TO_STAGE,f.currentTarget))}};this.addEventListener(psd.fenix.StageEvent.ADDED_TO_STAGE,d,this);var c=[];this.displayList=function(){return c};this.numChildren=function(){return c.length};var e=true;this.mouseChildren=function(f){if(f==true||f==false){e=f}return e};this.addChild=function(f){c.push(f);f.dispatchEvent(new psd.fenix.StageEvent(psd.fenix.StageEvent.ADDED,this));if(this.stage()!=null){f.dispatchEvent(new psd.fenix.StageEvent(psd.fenix.StageEvent.ADDED_TO_STAGE,this.stage()))}if(this.className=="psd.fenix.Stage"){f.dispatchEvent(new psd.fenix.StageEvent(psd.fenix.StageEvent.ADDED_TO_STAGE,this))}return f};this.removeChild=function(g){var f=this.getChildIndex(g);if(f>=0){c.splice(f,1);g.dispatchEvent(new psd.fenix.StageEvent(psd.fenix.StageEvent.REMOVED,this));if(this.className=="psd.fenix.Stage"){g.dispatchEvent(new psd.fenix.StageEvent(psd.fenix.StageEvent.REMOVED_FROM_STAGE,this))}}return g};this.addChildAt=function(g,f){c.splice(f,0,g);g.dispatchEvent(new psd.fenix.StageEvent(psd.fenix.StageEvent.ADDED,this));if(this.stage()!=null){g.dispatchEvent(new psd.fenix.StageEvent(psd.fenix.StageEvent.ADDED_TO_STAGE,this.stage()))}if(this.className=="psd.fenix.Stage"){g.dispatchEvent(new psd.fenix.StageEvent(psd.fenix.StageEvent.ADDED_TO_STAGE,this))}return g};this.removeChildAt=function(f){var g=null;if(f>=0&&f<=c.length){g=c[f];c.splice(f,1);g.dispatchEvent(new psd.fenix.StageEvent(psd.fenix.StageEvent.ADDED,this));if(this.className=="psd.fenix.Stage"){g.dispatchEvent(new psd.fenix.StageEvent(psd.fenix.StageEvent.ADDED_TO_STAGE,this))}}return g};this.getChildIndex=function(h){var g=0,f=-1;for(g in c){if(c[g]===h){f=g;break}}return f};this.measure=function(){var g,m,k=c.length,f=Number.MAX_VALUE,j=-Number.MAX_VALUE,l=Number.MAX_VALUE,h=-Number.MAX_VALUE;if(k){for(g=0;g<k;g++){m=c[g];if(m.x<f){f=m.x}if((m.x+m.width())>j){j=m.x+m.width()}if(m.y<l){l=m.y}if((m.y+m.height())>h){h=m.y+m.height()}}this.validateSize((j-f),(h-l))}else{this.validateSize(0,0)}};this.removeAllChildren=function(){while(this.numChildren>0){this.removeChildAt(0)}};this.render=function(f){var g;if(f!=null&&this.visible&&this.globalAlpha()>0){f.save();this._prepareContext(f);this.graphics().draw(f);if(this._render){this._render(f)}for(g=0;g<c.length;g++){c[g].render(f)}this.measure();f.restore()}};this.invalidateMouseStatus=function(g){var f;for(f in c){c[f].invalidateMouseStatus(g)}b.prototype.invalidateMouseStatus.apply(this,[g])};this.calculateMouseStatus=function(j){var h=false,g=psd.fenix.hitContext,f=c.length;g.save();if(this.className!="psd.fenix.Stage"){this._prepareContext(g)}while(f>0){f--;h=c[f].calculateMouseStatus(j);if(h){break}}if(f>0){while(f>0){f--;c[f].invalidateMouseStatus(j)}}g.restore();if(!h){h=b.prototype.calculateMouseStatus.apply(this,[j])}this.updateMouseStatus(h,j,true);return h};this.calculateMouseDownStatus=function(j){var h=false,g=psd.fenix.hitContext,f=c.length;g.save();if(this.className!="psd.fenix.Stage"){this._prepareContext(g)}while(f>0){f--;h=c[f].calculateMouseDownStatus(j);if(h){break}}g.restore();if(!h){h=b.prototype.calculateMouseDownStatus.apply(this,[j])}this.updateMouseDownStatus(h,j);return h}}a.DisplayObjectContainer=b})(psd.fenix);(function(b){a.prototype=new psd.fenix.DisplayObject();function a(e,h){psd.fenix.DisplayObject.call(this);this.className="psd.fenix.Movieclip";var g=0;var f=true;var d=e;var c=h;this.invalidateSize(c[0].frame.w,c[0].frame.h);this._render=function(r,q){var o=c[g],k=o.frame,m=o.rotated,j=m?k.h:k.w,n=m?k.w:k.h,p=m?this.height():this.width(),l=m?this.width():this.height();if(m){r.translate(0,l/2);r.rotate(-Math.PI/2)}r.drawImage(d,k.x,k.y,j,n,0,0,j,n);if(f&&!q){g++;if(g>=c.length){g=0}}};var i=function(j){var l=g,k;for(k in c){if(c[k].label==j){l=k;break}}return l};this.gotoAndStop=function(j){this.stop();if(typeof(j)=="number"){g=j}else{if(typeof(j)=="string"){g=i(j)}}};this.gotoAndPlay=function(j){if(typeof(j)=="number"){g=j}else{if(typeof(j)=="string"){g=i(j)}}this.play()};this.play=function(){f=true};this.stop=function(){f=false};this.currentFrame=function(){return g};this.currentLabel=function(){return c[g].label}}b.Movieclip=a})(psd.fenix);(function(b){a.prototype=new psd.fenix.DisplayObject();function a(e){psd.fenix.DisplayObject.call(this);this.className="psd.fenix.display.Video";var f=e;var d=false;var c=f.mediaTag();this._render=function(g){if(d&&c!=null){g.drawImage(c,0,0,this.width(),this.height())}};this.testHit=function(g,h){return(g>=this.x&&g<=this.x+this.width()&&h>=this.y&&h<=this.y+this.height())}}b.Video=a})(psd.fenix.display);(function(b){a.prototype=new psd.fenix.DisplayObject();function a(d){psd.fenix.DisplayObject.call(this);this.className="psd.fenix.Clip";this.viewPort=null;var e=d;var f=false;var c=new Image();c.onload=(function(g){return function(){f=true;g.invalidateSize(c.width,c.height)}})(this);this._render=function(g,h){if(f==true){if(this.viewPort==null){if(this.width()==0&&this.height()==0){g.drawImage(c,0,0)}else{g.drawImage(c,0,0,this.width(),this.height())}}else{g.drawImage(c,this.viewPort.x,this.viewPort.y,this.viewPort.width,this.viewPort.height,this.x,this.y,this.width(),this.height())}}};c.src=e}b.Clip=a})(psd.fenix);(function(b){a.prototype=new psd.framework.EventDispatcher();a.TYPE_VIDEO="video";a.TYPE_AUDIO="audio";function a(f,d,ab){psd.framework.EventDispatcher.call(this);this.className="psd.fenix.media.MediaElement";var c=d;var T=f;var v=ab;var R=null;var u=null;var C=(function(ag){return function(ah){M.apply(ag,[ah])}})(this);var M=function(ag){this.dispatchEvent(new psd.fenix.event.MediaEvent(psd.fenix.event.MediaEvent.ABORT))};var H=(function(ag){return function(ah){k.apply(ag,[ah])}})(this);var k=function(ag){this.dispatchEvent(new psd.fenix.event.MediaEvent(psd.fenix.event.MediaEvent.CAN_PLAY))};var U=(function(ag){return function(ah){j.apply(ag,[ah])}})(this);var j=function(ag){this.dispatchEvent(new psd.fenix.event.MediaEvent(psd.fenix.event.MediaEvent.CAN_PLAY_THROUGH))};var n=(function(ag){return function(ah){E.apply(ag,[ah])}})(this);var E=function(ag){this.dispatchEvent(new psd.fenix.event.MediaEvent(psd.fenix.event.MediaEvent.DURATION_CHANGE))};var o=(function(ag){return function(ah){V.apply(ag,[ah])}})(this);var V=function(ag){this.dispatchEvent(new psd.fenix.event.MediaEvent(psd.fenix.event.MediaEvent.EMPTIED))};var ae=(function(ag){return function(ah){l.apply(ag,[ah])}})(this);var l=function(ag){this.dispatchEvent(new psd.fenix.event.MediaEvent(psd.fenix.event.MediaEvent.ENDED));R.load()};var J=(function(ag){return function(ah){Q.apply(ag,[ah])}})(this);var Q=function(ag){this.dispatchEvent(new psd.fenix.event.MediaEvent(psd.fenix.event.MediaEvent.ERROR))};var X=(function(ag){return function(ah){aa.apply(ag,[ah])}})(this);var aa=function(ag){this.dispatchEvent(new psd.fenix.event.MediaEvent(psd.fenix.event.MediaEvent.LOADED_DATA))};var P=(function(ag){return function(ah){af.apply(ag,[ah])}})(this);var af=function(ag){this.dispatchEvent(new psd.fenix.event.MediaEvent(psd.fenix.event.MediaEvent.LOADED_METADATA))};var Z=(function(ag){return function(ah){N.apply(ag,[ah])}})(this);var N=function(ag){this.dispatchEvent(new psd.fenix.event.MediaEvent(psd.fenix.event.MediaEvent.LOAD_START))};var i=(function(ag){return function(ah){q.apply(ag,[ah])}})(this);var q=function(ag){this.dispatchEvent(new psd.fenix.event.MediaEvent(psd.fenix.event.MediaEvent.PAUSE))};var s=(function(ag){return function(ah){S.apply(ag,[ah])}})(this);var S=function(ag){this.dispatchEvent(new psd.fenix.event.MediaEvent(psd.fenix.event.MediaEvent.PLAY))};var ac=(function(ag){return function(ah){F.apply(ag,[ah])}})(this);var F=function(ag){this.dispatchEvent(new psd.fenix.event.MediaEvent(psd.fenix.event.MediaEvent.PLAYING))};var z=(function(ag){return function(ah){w.apply(ag,[ah])}})(this);var w=function(ag){this.dispatchEvent(new psd.fenix.event.MediaEvent(psd.fenix.event.MediaEvent.PROGRESS))};var I=(function(ag){return function(ah){K.apply(ag,[ah])}})(this);var K=function(ag){this.dispatchEvent(new psd.fenix.event.MediaEvent(psd.fenix.event.MediaEvent.RATE_CHANGE))};var r=(function(ag){return function(ah){p.apply(ag,[ah])}})(this);var p=function(ag){this.dispatchEvent(new psd.fenix.event.MediaEvent(psd.fenix.event.MediaEvent.READY_STATE_CHANGE))};var x=(function(ag){return function(ah){O.apply(ag,[ah])}})(this);var O=function(ag){this.dispatchEvent(new psd.fenix.event.MediaEvent(psd.fenix.event.MediaEvent.SEEKED))};var B=(function(ag){return function(ah){h.apply(ag,[ah])}})(this);var h=function(ag){this.dispatchEvent(new psd.fenix.event.MediaEvent(psd.fenix.event.MediaEvent.SEEKING))};var t=(function(ag){return function(ah){ad.apply(ag,[ah])}})(this);var ad=function(ag){this.dispatchEvent(new psd.fenix.event.MediaEvent(psd.fenix.event.MediaEvent.STALLED))};var A=(function(ag){return function(ah){g.apply(ag,[ah])}})(this);var g=function(ag){this.dispatchEvent(new psd.fenix.event.MediaEvent(psd.fenix.event.MediaEvent.SUSPEND))};var y=(function(ag){return function(ah){D.apply(ag,[ah])}})(this);var D=function(ag){this.dispatchEvent(new psd.fenix.event.MediaEvent(psd.fenix.event.MediaEvent.TIME_UPDATE,R.currentTime))};var W=(function(ag){return function(ah){G.apply(ag,[ah])}})(this);var G=function(ag){this.dispatchEvent(new psd.fenix.event.MediaEvent(psd.fenix.event.MediaEvent.VOLUME_CHANGE))};var e=(function(ag){return function(ah){L.apply(ag,[ah])}})(this);var L=function(ag){this.dispatchEvent(new psd.fenix.event.MediaEvent(psd.fenix.event.MediaEvent.WAITING))};var Y=function(){var ah="[object HTMLVideoElement]",al="[object HTMLAudioElement]",aj="[object Array]",ak=Object.prototype.toString.apply(c),ai,am;R=(ak==ah||ak==al)?c:null;u=ak==aj?c:[c];if(R==null&&(T==a.TYPE_VIDEO||T==a.TYPE_AUDIO)){R=document.createElement(T);R.setAttribute("style","position:absolute; background:black;");for(ai in u){var ag=document.createElement("source");ag.setAttribute("src",u[ai].src);R.appendChild(ag)}if(typeof(v)!="undefined"&&v!=null){am=v.autoplay;if(typeof(am)!="undefined"&&(am=="true"||am==true)){R.setAttribute("autoplay","autoplay")}am=v.poster;if(typeof(am)!="undefined"&&am!=""){R.setAttribute("poster",am)}}m(psd.fenix.event.MediaEvent.ABORT,C);m(psd.fenix.event.MediaEvent.CAN_PLAY,H);m(psd.fenix.event.MediaEvent.CAN_PLAY_THROUGH,U);m(psd.fenix.event.MediaEvent.DURATION_CHANGE,n);m(psd.fenix.event.MediaEvent.EMPTIED,o);m(psd.fenix.event.MediaEvent.ENDED,ae);m(psd.fenix.event.MediaEvent.ERROR,J);m(psd.fenix.event.MediaEvent.LOADED_DATA,X);m(psd.fenix.event.MediaEvent.LOADED_METADATA,P);m(psd.fenix.event.MediaEvent.LOAD_START,Z);m(psd.fenix.event.MediaEvent.PAUSE,i);m(psd.fenix.event.MediaEvent.PLAY,s);m(psd.fenix.event.MediaEvent.PLAYING,ac);m(psd.fenix.event.MediaEvent.PROGRESS,z);m(psd.fenix.event.MediaEvent.RATE_CHANGE,I);m(psd.fenix.event.MediaEvent.READY_STATE_CHANGE,r);m(psd.fenix.event.MediaEvent.SEEKED,x);m(psd.fenix.event.MediaEvent.SEEKING,B);m(psd.fenix.event.MediaEvent.STALLED,t);m(psd.fenix.event.MediaEvent.SUSPEND,A);m(psd.fenix.event.MediaEvent.TIME_UPDATE,y);m(psd.fenix.event.MediaEvent.VOLUME_CHANGE,W);m(psd.fenix.event.MediaEvent.WAITING,e);psd.fenix.topLevelApplication.insertBefore(R,psd.fenix.topLevelCanvas)}};var m=function(ag,ah){if(R){if(R.addEventListener){R.addEventListener(ag,ah,false)}else{if(R.attachEvent){R.attachEvent(ag,ah)}}}};Y.apply(this);this.currentTime=function(ah){var ag=0;if(R){if(typeof(ah)!="undefined"){R.currentTime=ah}ag=R.currentTime}return ag};this.duration=function(){if(R){return R.duration}else{return 0}};this.pause=function(){if(R){R.pause()}};this.paused=function(){if(R){return R.paused}else{return false}};this.play=function(){if(R){R.play()}};this.resize=function(ag,aj,ah,ai){if(R){if(ah){R.width=ah}if(ai){R.height=ai}}};this.volume=function(ah){var ag=0;if(R){if(ah>=0&&ah<=1){R.volume=ah}ag=R.volume}return ag}}b.MediaElement=a})(psd.fenix.media);(function(a){b.prototype=new psd.framework.EventDispatcher();function b(){psd.framework.EventDispatcher.call(this);this.className="psd.fenix.media.MediaController";var c=null;var f=false;var e=function(h){f=false;c.pause();c.currentTime(0);this.dispatchEvent(h)};var d=function(h){if(!f){f=true;this.dispatchEvent(new psd.fenix.event.MediaEvent(psd.fenix.event.MediaEvent.BEGIN))}this.dispatchEvent(h)};var g=function(h){this.dispatchEvent(h)};this.attachStream=function(h){c=h;c.addEventListener(psd.fenix.event.MediaEvent.ENDED,e,this);c.addEventListener(psd.fenix.event.MediaEvent.PLAYING,d,this);c.addEventListener(psd.fenix.event.MediaEvent.TIME_UPDATE,g,this)};this.currentTime=function(){if(c){return c.currentTime()}else{return 0}};this.currentTimeAsTimeCode=function(h){return this.secondsAsTimeCode(this.currentTime(),h)};this.duration=function(){if(c){return c.duration()}else{return 0}};this.durationAsTimeCode=function(h){return this.secondsAsTimeCode(this.duration(),h)};this.play=function(){if(c){c.play()}};this.pause=function(){if(c){c.pause()}};this.paused=function(){if(c){return c.paused()}else{return false}};this.secondsAsTimeCode=function(l,k){var i=Math.floor(l/3600),j=Math.floor((l-(i*3600))/60),m=Math.floor(l-(i*3600)-(j*60)),h="";if(i<10){i="0"+i}if(j<10){j="0"+j}if(m<10){m="0"+m}if(k==null){h=i+":"+j+":"+m}else{h=k.replace("hh",i);h=h.replace("mm",j);h=h.replace("ss",m)}return h};this.seek=function(h){if(h>0&&h<1){h=h*c.duration()}c.currentTime(h)};this.volume=function(h){if(c){return c.volume(h)}else{return 0}}}a.MediaController=b})(psd.fenix.media);(function(b){function a(){this.className="psd.fenix.text.TextFormat";this.bold=false;this.color=0;this.font="Verdana, Geneva, sans-serif";this.italic=false;this.size=16;this.toCanvasString=function(){var c="";if(this.bold){c+="bold "}if(this.italic){c+="italic "}c+=this.size+"px ";c+=this.font+" ";return c};this.toCSSString=function(){var c="";c+="font-family:"+this.font+";";c+="font-size:"+this.size+"px;";c+="font-style:"+(this.italic?"italic;":"normal;");c+="font-weight:"+(this.bold?"bold;":"normal;");c+="color:"+this.color.toString(16)+";";return c}}b.TextFormat=a})(psd.fenix.text);(function(a){a.TextFieldAutoSize={};a.TextFieldAutoSize.CENTER="center";a.TextFieldAutoSize.LEFT="left";a.TextFieldAutoSize.NONE="none";a.TextFieldAutoSize.RIGHT="right"})(psd.fenix.text);(function(b){a.prototype=new psd.fenix.DisplayObject();function a(){psd.fenix.DisplayObject.call(this);this.className="psd.fenix.text.TextField";var e=new psd.fenix.text.TextFormat();this._render=function(l){var k=0;if(d==psd.fenix.text.TextFieldAutoSize.CENTER){k=-this.width()/2}if(d==psd.fenix.text.TextFieldAutoSize.RIGHT){k=-this.width()}l.beginPath();l.rect(k,0,this.width(),this.height());l.lineWidth=1;l.strokeStyle=psd.fenix.ColorUtil.colorToRGB(f,1);l.fillStyle=psd.fenix.ColorUtil.colorToRGB(g,1);if(c){l.fill()}if(j){l.stroke()}l.closePath();l.textAlign=d;l.textBaseline="top";l.font=e.toCanvasString();l.fillStyle=psd.fenix.ColorUtil.colorToRGB(e.color,1);l.fillText(i,0,0)};var h=function(){var k=document.getElementsByTagName("body")[0],m=document.createElement("span"),n=document.createTextNode(i),l=e.toCSSString();m.appendChild(n);m.setAttribute("style",l);k.appendChild(m);this.invalidateSize(m.offsetWidth,m.offsetHeight);k.removeChild(m)};var d=psd.fenix.text.TextFieldAutoSize.LEFT;this.autoSize=function(k){if(k==psd.fenix.text.TextFieldAutoSize.LEFT||k==psd.fenix.text.TextFieldAutoSize.RIGHT||k==psd.fenix.text.TextFieldAutoSize.CENTER){d=k}return d};var c=false;this.background=function(k){if(k==true||k==false){c=k}return c};var g=16777215;this.backgroundColor=function(k){if(k!=undefined&&k!=null){g=k}return g};var j=false;this.border=function(k){if(k==true||k==false){j=k}return j};var f=0;this.borderColor=function(k){if(k!=undefined&&k!=null){f=k}return f};this.getTextFormat=function(){var k,l={};for(k in e){l[k]=e[k]}return l};this.setTextFormat=function(k){if(typeof(k.className)!="undefined"&&k.className=="psd.fenix.text.TextFormat"){e=k;if(d!=psd.fenix.text.TextFieldAutoSize.NONE){h.apply(this)}}};var i="";this.text=function(k){if(k!=undefined&&k!=null){i=k}if(d!=psd.fenix.text.TextFieldAutoSize.NONE){h.apply(this)}return i};this.testHit=function(l,m){var k=0;if(d==psd.fenix.text.TextFieldAutoSize.CENTER){k=-this.width()/2}if(d==psd.fenix.text.TextFieldAutoSize.RIGHT){k=-this.width()}return(l>=(k+this.x)&&l<=(k+this.x+this.width())&&m>=this.y&&m<=this.y+this.height())}}b.TextField=a})(psd.fenix.text);(function(b){a.prototype=new psd.fenix.DisplayObjectContainer();function a(s,y,A,r,c,v){psd.fenix.DisplayObjectContainer.call(this);this.className="psd.fenix.controls.ProgressBar";var e=false;var D=s;var u=y;var w=null;var x=A;var C=null;var m=r;var p=null;var B=null;var n=c;var i=null;var f=null;var t=null;var d=v;var q=false;var z=0;var l=function(){w=new psd.fenix.Movieclip(D,u);w.gotoAndStop(0);C=new psd.fenix.Movieclip(D,x);C.gotoAndStop(0);p=new psd.fenix.Movieclip(D,m);p.buttonMode=true;p.useHandCursor=true;p.gotoAndStop(0);B=new psd.fenix.Movieclip(D,u);B.buttonMode=true;B.useHandCursor=true;B.alpha=1;B.gotoAndStop(0);i=new psd.fenix.Movieclip(D,n);i.buttonMode=true;i.useHandCursor=true;i.gotoAndStop(0);i.width(0);this.addChild(w);this.addChild(B);this.addChild(p);this.addChild(C);this.addChild(i);if(d!=null){d.x=z*p.width();d.addEventListener(psd.fenix.MouseEvent.MOUSE_DOWN,g,this);this.addChild(d)}B.addEventListener(psd.fenix.MouseEvent.MOUSE_DOWN,j,this);p.addEventListener(psd.fenix.MouseEvent.MOUSE_DOWN,j,this);i.addEventListener(psd.fenix.MouseEvent.MOUSE_DOWN,j,this);e=true};var j=function(E){z=E.localX/p.width();this.setProgress(z);this.dispatchEvent(new psd.fenix.event.ProgressEvent(psd.fenix.event.ProgressEvent.CHANGE,z))};var g=function(E){q=true;this.stage().addEventListener(psd.fenix.MouseEvent.MOUSE_MOVE,o,this);this.stage().addEventListener(psd.fenix.MouseEvent.MOUSE_UP,k,this)};var o=function(F){var E=F.stageX-this.globalX();if(E<0){E=0}if(E>p.width()){E=p.width()}d.x=E-d.width()/2;if(h){z=E;i.width(E);this.dispatchEvent(new psd.fenix.event.ProgressEvent(psd.fenix.event.ProgressEvent.CHANGE,E/p.width()))}};var k=function(F){var E=F.stageX-this.globalX();if(E<0){E=0}if(E>p.width()){E=p.width()}z=E;q=false;d.x=E-d.width()/2;this.setProgress(E/p.width());this.dispatchEvent(new psd.fenix.event.ProgressEvent(psd.fenix.event.ProgressEvent.CHANGE,E/p.width()));this.stage().removeEventListener(psd.fenix.MouseEvent.MOUSE_MOVE,o,this);this.stage().removeEventListener(psd.fenix.MouseEvent.MOUSE_UP,k,this)};l.apply(this);var h=false;this.liveUpdate=function(E){if(E!=undefined){h=E}return h};this.resize=function(F,E){if(e){w.x=0;C.x=F-C.width();p.x=w.x+w.width();p.width(C.x-p.x);i.x=p.x;i.width(p.width()*z);if(f!=null){w.height(f);C.height(f);p.height(f);i.height(f)}if(t!=null){B.height(t);B.width(p.width());B.x=p.x;B.y=(p.height()-B.height())/2}if(d!=null){d.x=d.x=p.width()*z-d.width()/2;d.y=(p.height()-d.height())/2;if(d.x-d.width/2<0){d.x=v.width/2}}}};this.slider=function(E){if(d!=null){this.removeChild(d)}d=E;d.x=z*p.width()-d.width()/2;d.addEventListener(psd.fenix.MouseEvent.MOUSE_DOWN,g,this);this.addChild(d)};this.setProgress=function(F){z=F;if(e){var E=p.width()*F==0?1:p.width()*F;if(!h||!q){i.width(E)}if(d!=null&&!q){d.x=E-d.width()/2}}};this.currentProgress=function(){return z};this.barHeight=function(E){f=E};this.zoneHeight=function(E){t=E}}b.ProgressBar=a})(psd.fenix.controls);(function(b){a.prototype=new psd.fenix.DisplayObjectContainer();function a(e,l,s){psd.fenix.DisplayObjectContainer.call(this);this.className="psd.fenix.controls.MediaControlBar";var c=s;var q=l;var g=e;var u=null;var k=null;var x=null;var B=null;var o=null;var f=null;var d=false;var n=(function(D){return function(){C.apply(D)}})(this);var C=function(){var E=t.texture(),D=t.getFrames(["play","pause"]);fullscreenFrames=t.getFrames(["fullscreen","normalscreen"]),barLeftFrames=t.getFrames("barLeft"),barRightFrames=t.getFrames("barRight"),barCenterFrames=t.getFrames("barCenterEmpty"),barFillFrames=t.getFrames("barCenterFill");u=new psd.fenix.Movieclip(E,D);u.useHandCursor=true;u.buttonMode=true;u.addEventListener(psd.fenix.MouseEvent.MOUSE_OVER,m,this);u.addEventListener(psd.fenix.MouseEvent.MOUSE_OUT,v,this);u.addEventListener(psd.fenix.MouseEvent.MOUSE_DOWN,z,this);u.gotoAndStop("play-idle");x=new psd.fenix.Movieclip(E,fullscreenFrames);x.useHandCursor=true;x.buttonMode=true;x.addEventListener(psd.fenix.MouseEvent.MOUSE_OVER,j,this);x.addEventListener(psd.fenix.MouseEvent.MOUSE_OUT,r,this);x.addEventListener(psd.fenix.MouseEvent.MOUSE_DOWN,y,this);x.gotoAndStop("normal-idle");B=new psd.fenix.controls.ProgressBar(E,barLeftFrames,barRightFrames,barCenterFrames,barFillFrames);B.addEventListener(psd.fenix.MouseEvent.MOUSE_DOWN,p,this);var F=new psd.fenix.text.TextFormat();F.color=16777215;F.size=14;o=new psd.fenix.text.TextField();o.setTextFormat(F);o.text("00:00");f=new psd.fenix.text.TextField();f.setTextFormat(F);f.text("00:00");this.addChild(u);this.addChild(x);this.addChild(B);this.addChild(o);this.addChild(f);d=true};var p=function(E){var D=(E.stageX-B.globalX())/B.width();g.seek(D)};var m=function(D){var E=u.currentLabel(),F=E.substr(0,E.indexOf("-"));u.gotoAndStop(F+"-over")};var v=function(D){var E=u.currentLabel(),F=E.substr(0,E.indexOf("-"));u.gotoAndStop(F+"-idle")};var z=function(D){var E=u.currentLabel(),F=E.substr(0,E.indexOf("-"));if(g.paused()){g.play()}else{g.pause()}if(F=="play"){u.gotoAndStop("pause-over")}else{u.gotoAndStop("play-over")}this.dispatchEvent(new psd.framework.Event("play"))};var j=function(D){x.gotoAndStop(this.stage().displayState()+"-over")};var r=function(D){x.gotoAndStop(this.stage().displayState()+"-idle")};var y=function(D){if(this.stage()!=null){if(this.stage().displayState()==psd.fenix.stage.StageDisplayState.NORMAL){this.stage().displayState(psd.fenix.stage.StageDisplayState.FULL_SCREEN)}else{this.stage().displayState(psd.fenix.stage.StageDisplayState.NORMAL)}}};var t=new psd.fenix.textures.TextureAtlas(q,c);t.addEventListener("texture_atlas_ready",n);var i=function(D){this.removeEventListener(psd.fenix.StageEvent.ADDED_TO_STAGE,i,this);this.stage().addEventListener(psd.fenix.StageEvent.DISPLAY_STATE_CHANGE,w,this);this.resize(this.stage().stageWidth()-40,this.stage().stageHeight())};var w=function(D){x.gotoAndStop(this.stage().displayState()+"-idle")};var h=function(D){B.setProgress(g.currentTime()/g.duration());o.text(g.timeAsTimeCode("mm:ss"));f.text(g.durationAsTimeCode("mm:ss"))};var A=function(D){if(d){f.text(g.durationAsTimeCode("mm:ss"))}};g.addEventListener("timeupdate",h,this);g.addEventListener("metadata",A,this);this.resize=function(E,D){if(d){u.x=0;x.x=E-x.width();o.x=u.x+u.width()+10;o.y=u.height()/2-o.height()/2;f.x=x.x-f.width()-10;f.y=u.height()/2-o.height()/2;B.x=o.x+o.width()+10;B.resize(f.x-15-B.x)}};this.addEventListener(psd.fenix.StageEvent.ADDED_TO_STAGE,i,this)}b.MediaControlBar=a})(psd.fenix.controls);(function(b){a.prototype=new psd.fenix.DisplayObjectContainer();function a(j){psd.fenix.DisplayObjectContainer.call(this);this.className="psd.fenix.controls.VideoPlayback";var i=j;var g=null;var c=null;var f=null;var d=null;var e=false;var h=function(){g=new psd.fenix.media.VideoElement(i);c=new psd.fenix.display.Video(g);f=new psd.fenix.media.MediaController();f.attachStream(g);d=new psd.fenix.controls.MediaControlBar(f);this.addChild(c);this.addChild(d);e=true};this.resize=function(m,k){var l=m-40;if(e){g.width(m);g.height(k);d.x=20;d.y=k-50;d.resize(l,k)}};h.apply(this)}b.VideoPlayback=a})(psd.fenix.controls);(function(a){a.StageDisplayState={};a.StageDisplayState.NORMAL="normal";a.StageDisplayState.FULL_SCREEN="fullscreen"})(psd.fenix.stage);(function(a){b.prototype=new psd.fenix.DisplayObjectContainer();b.FPS=60;function b(i,W){psd.fenix.DisplayObjectContainer.call(this);this.className="psd.fenix.Stage";var R=i;var s=null;var V=R+"_fenix";var j=null;var L=R+"_hits";var t=null;var y=null;var F=0;var x=0;var H=true;var z=false;var c=false;var N=true;var E=null;var k=null;var r=null;var p={autosize:true};if(W!=undefined&&W!=null){p.autosize=W.autosize!=null&&W.autosize!=undefined?W.autosize:true;p.width=W.width!=null&&W.width!=undefined?W.width:400;p.height=W.height!=null&&W.height!=undefined?W.height:300;p.hitCanvas=W.hitCanvas!=null&&W.hitCanvas!=undefined?W.hitCanvas:false}var A=(function(Z){return function(){T.apply(Z)}})(this);var T=function(){t=document.getElementById(R);if(t==null){this.dispatchEvent(new psd.fenix.StageEvent(psd.fenix.StageEvent.INIT_ERROR));return}y=document.createElement("div");y.setAttribute("style","position:relative; width:100%; height:100%;");t.appendChild(y);k=y.requestFullScreen||y.mozRequestFullScreen||y.webkitRequestFullScreen||function(){};r=document.cancelFullScreen||document.mozCancelFullScreen||document.webkitCancelFullScreen||function(){};if(document.addEventListener){document.addEventListener("fullscreenchange",U,false);document.addEventListener("mozfullscreenchange",U,false);document.addEventListener("webkitfullscreenchange",U,false)}else{if(document.attachEvent){document.attachEvent("onfullscreenchange",U);document.attachEvent("onmozfullscreenchange",U);document.attachEvent("onwebkitfullscreenchange",U)}}if(p.autosize==true){C=F=t.clientWidth==undefined||t.clientWidth==0?448:t.clientWidth;G=x=t.clientHeight==undefined||t.clientHeight==0?365:t.clientHeight}else{C=p.width;G=p.height}s=document.createElement("canvas");s.setAttribute("style","position:absolute;");s.id=V;s.width=C;s.height=G;y.appendChild(s);j=document.createElement("canvas");j.id=L;j.width=j.height=1;if(p.hitCanvas){var Z=document.getElementById(p.hitCanvas);if(Z!=null){j.width=Z.clientWidth;j.height=Z.clientHeight;Z.appendChild(j)}}if(Object.prototype.toString.call(s)==="[object HTMLCanvasElement]"){Log.log("Initializing fenix in standard mode...");_renderContext=s.getContext("2d");M=j.getContext("2d");_renderContext.fillStyle=m;psd.fenix.topLevelApplication=y;psd.fenix.topLevelCanvas=s;psd.fenix.canvasContext=_renderContext;psd.fenix.hitContext=M;this.start();this.dispatchEvent(new psd.fenix.StageEvent(psd.fenix.StageEvent.INIT))}else{Log.log("Initializing fenix in compatibility mode...");G_vmlCanvasManager.initElement(s);G_vmlCanvasManager.initElement(j);_renderContext=s.getContext("2d");M=j.getContext("2d");_renderContext.fillStyle=m;psd.fenix.topLevelApplication=y;psd.fenix.topLevelCanvas=s;psd.fenix.canvasContext=_renderContext;psd.fenix.hitContext=M;this.changeFrameRate(10);this.dispatchEvent(new psd.fenix.StageEvent(psd.fenix.StageEvent.INIT))}};var U=(function(Z){return function(){O.apply(Z)}})(this);var O=function(){if(document.mozFullScreenElement||document.webkitFullscreenElement){P=psd.fenix.stage.StageDisplayState.FULL_SCREEN}else{P=psd.fenix.stage.StageDisplayState.NORMAL}this.dispatchEvent(new psd.fenix.StageEvent(psd.fenix.StageEvent.DISPLAY_STATE_CHANGE))};var J=(function(Z){return function(){f.apply(Z)}})(this);var f=function(){if(P==psd.fenix.stage.StageDisplayState.NORMAL){if((t.clientWidth!=F||t.clientHeight!=x)&&!psd.framework.ua.msie){F=t.clientWidth;x=t.clientHeight;if(p.autosize){s.width=C=F;s.height=G=x}else{s.width=C=p.width;s.height=G=p.height}this.dispatchEvent(new psd.fenix.StageEvent(psd.fenix.StageEvent.RESIZE))}}else{if(window.innerWidth!=F||window.innerHeight!=x){F=window.innerWidth;x=window.innerHeight;s.width=C=F;s.height=G=x;this.dispatchEvent(new psd.fenix.StageEvent(psd.fenix.StageEvent.RESIZE))}}if(H){K();this.render(_renderContext)}if(c&&N){N=false;g.apply(this,[this.calculateMouseStatus])}this.dispatchEvent(new psd.fenix.StageEvent(psd.fenix.StageEvent.ENTER_FRAME));if(requestAnimationFrame!=undefined){requestAnimationFrame(J)}};var K=function(){_renderContext.clearRect(0,0,C,G);_renderContext.fillStyle=m;_renderContext.fillRect(0,0,C,G)};var l=(function(Z){return function(){e.apply(Z)}})(this);var e=function(){if(!z){z=true;g.apply(this,[this.calculateMouseDownStatus]);this.dispatchEvent(new psd.fenix.MouseEvent(psd.fenix.MouseEvent.MOUSE_DOWN,Y,X))}};var q=(function(Z){return function(){I.apply(Z)}})(this);var I=function(){if(z){z=false;g.apply(this,[this.calculateMouseDownStatus]);this.dispatchEvent(new psd.fenix.MouseEvent(psd.fenix.MouseEvent.MOUSE_UP,Y,X))}};var g=function(Z){M.clearRect(0,0,1,1);M.save();M.translate(-Y,-X);Z.apply(this,[{x:Y,y:X,down:z}]);M.restore()};var w=(function(Z){return function(aa){h.apply(Z,[aa])}})(this);var h=function(Z){var aa=n(s,Z);if(Z.offsetX){Y=Z.offsetX;X=Z.offsetY}else{Y=aa.x;X=aa.y}N=true;this.dispatchEvent(new psd.fenix.MouseEvent(psd.fenix.MouseEvent.MOUSE_MOVE,Y,X))};var Q=(function(Z){return function(aa){D.apply(Z,[aa])}})(this);var D=function(Z){var aa=n(s,Z);if(Z.offsetX){Y=Z.offsetX;X=Z.offsetY}else{Y=aa.x;X=aa.y}c=true;this.dispatchEvent(new psd.fenix.MouseEvent(psd.fenix.MouseEvent.MOUSE_OVER,Y,X))};var S=(function(Z){return function(){B.apply(Z)}})(this);var B=function(){Y=-5;X=-5;c=false;this.dispatchEvent(new psd.fenix.MouseEvent(psd.fenix.MouseEvent.MOUSE_OUT,Y,X))};function n(ab,Z){var af=ab;var ae=0;var ad=0;while(af&&af.tagName!="BODY"){ae+=af.offsetTop;ad+=af.offsetLeft;af=af.offsetParent}var ac=Z.clientX-ad+window.pageXOffset;var aa=Z.clientY-ae+window.pageYOffset;return{x:ac,y:aa}}var d=function(){if(s.addEventListener){s.addEventListener("mousemove",w,false);s.addEventListener("mouseover",Q,false);s.addEventListener("mouseout",S,false);s.addEventListener("mousedown",l,false);s.addEventListener("mouseup",q,false)}else{if(s.attachEvent){s.attachEvent("onmousemove",w);s.attachEvent("onmouseover",Q);s.attachEvent("onmouseout",S);s.attachEvent("onmousedown",l);s.attachEvent("onmouseup",q)}}};var o=function(){if(s.removeEventListener){s.removeEventListener("mousemove",w,false);s.removeEventListener("mouseover",Q,false);s.removeEventListener("mouseout",S,false);s.removeEventListener("mousedown",l,false);s.removeEventListener("mouseup",q,false)}else{if(s.attachEvent){s.detachEvent("onmousemove",w);s.detachEvent("onmouseover",Q);s.detachEvent("onmouseout",S);s.detachEvent("onmousedown",l);s.detachEvent("onmouseup",q)}}};var C=0;this.stageWidth=function(){return C};var G=0;this.stageHeight=function(){return G};var v=W&&!isNaN(W.fps)?W.fps:60;this.frameRate=function(){return v};var Y=-5;this.mouseX=function(){return Y};var X=-5;this.mouseY=function(){return X};var u=null;this.context2d=function(){return u};var M=null;this.hitContext=function(){return M};var P=psd.fenix.stage.StageDisplayState.NORMAL;this.displayState=function(aa){var ab=psd.fenix.stage.StageDisplayState.NORMAL,Z=psd.fenix.stage.StageDisplayState.FULL_SCREEN;if(aa==Z&&k!=undefined){k.apply(y)}if(aa==ab&&r!=undefined){r.apply(document)}return P};var m="rgba(255,255,255,0)";this.backgroundColor=function(Z){if(Z){m=Z;if(typeof(_renderContext)!="undefined"){_renderContext.fillStyle=m}}return m};this.init=function(){if(document.readyState==="complete"||document.readyState==="loaded"){T.apply(this)}else{if(window.addEventListener){window.addEventListener("load",A,false)}else{if(window.attachEvent){window.attachEvent("onload",A)}}}};this.start=function(){d();var Z=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame;window.requestAnimationFrame=Z;if(Z!=undefined){Z(J)}else{E=setInterval(J,(1000/v))}};this.pause=function(){o();if(E!=null){clearInterval(E)}};this.changeFrameRate=function(Z){v=Z;if(E!=null){clearInterval(E)}E=setInterval(J,1000/v)};this.freeze=function(Z){if(Z==true||Z==false){H=!Z}}}a.Stage=b})(psd.fenix);(function(a){b.prototype=new psd.fenix.DisplayObjectContainer();function b(I,ae,Y,Q,Z){psd.fenix.DisplayObjectContainer.call(this);this.className="psd.media.SkinnedSimpleMediaPlayer";var z=Z;var j=z.skin.id;var A=I;var m=ae;var D=Y;var s=null;var S=Q;var O=null;var V=null;var g=null;var c=false;var ad=null;var P=null;var L=null;var U=null;var ac=null;var f=null;var T=null;var G=null;var M=0.8;var ab=0.8;var v=false;var p=false;var B=false;var l=false;var W=function(){var af=(m&&D)?false:true;s=new psd.fenix.Stage(A,{autosize:af,width:m,height:D});s.addEventListener(psd.fenix.StageEvent.INIT,i,this);s.addEventListener(psd.fenix.StageEvent.INIT_ERROR,h,this);s.addEventListener(psd.fenix.StageEvent.DISPLAY_STATE_CHANGE,J,this);s.addEventListener(psd.fenix.StageEvent.RESIZE,n,this);s.init()};var h=function(){Log.log("INIT ERROR")};var i=function(){var ah=e("psd.media.skins.MediaSimple_"+j),ag=typeof(z.base)!="undefined"?z.base:"",af=z.media.type.indexOf("video")>=0?psd.fenix.media.MediaElement.TYPE_VIDEO:psd.fenix.media.MediaElement.TYPE_AUDIO;O=new psd.fenix.media.MediaElement(af,S,{autoplay:z.player.autoplay,poster:z.media.poster,width:m,height:D});V=new psd.fenix.media.MediaController();V.addEventListener(psd.fenix.event.MediaEvent.ENDED,t,this);V.addEventListener(psd.fenix.event.MediaEvent.BEGIN,H,this);V.addEventListener(psd.fenix.event.MediaEvent.PLAYING,R,this);V.addEventListener(psd.fenix.event.MediaEvent.TIME_UPDATE,K,this);V.addEventListener(psd.fenix.event.MediaEvent.PLAY,C,this);V.addEventListener(psd.fenix.event.MediaEvent.PAUSE,y,this);V.addEventListener(psd.fenix.event.MediaEvent.WAITING,X,this);V.attachStream(O);if(z.player.controls==undefined||(z.player.controls!=false&&z.player.controls!="false")){g=new ah(z.skin,ag);if(typeof(g.mediaType)!="undefined"){g.mediaType(Z.media.type)}if(typeof(g.isLive)!="undefined"){g.isLive(z.media.live)}g.addEventListener(psd.media.SkinEvent.SKIN_READY,k,this);this.addChild(g)}s.addChild(this)};var e=function(ai){var aj=ai.split("."),af=aj.length,ag,ah=(window||this);for(ag=0;ag<af;ag++){ah=ah[aj[ag]]}return ah};var k=function(){if(typeof(g.playPauseElement)!="undefined"){ad=g.playPauseElement();ad.addEventListener(psd.fenix.MouseEvent.MOUSE_DOWN,aa,this)}if(typeof(g.playBeginElement)!="undefined"){P=g.playBeginElement();if(P!=null){P.addEventListener(psd.fenix.MouseEvent.MOUSE_DOWN,F,this)}}if(typeof(g.fullscreenElement)!="undefined"){U=g.fullscreenElement();if(U!=null){U.addEventListener(psd.fenix.MouseEvent.MOUSE_DOWN,E,this)}}if(typeof(g.currentTimeElement)!="undefined"){ac=g.currentTimeElement()}if(typeof(g.totalTimeElement)!="undefined"){f=g.totalTimeElement()}if(typeof(g.progressBarElement)!="undefined"){L=g.progressBarElement();L.addEventListener(psd.fenix.event.ProgressEvent.CHANGE,r,this)}if(typeof(g.volumeElement)!="undefined"){T=g.volumeElement();T.setProgress(0.8);T.addEventListener(psd.fenix.event.ProgressEvent.CHANGE,o,this)}if(typeof(g.muteElement)!="undefined"){G=g.muteElement();G.addEventListener(psd.fenix.MouseEvent.MOUSE_DOWN,d,this)}if(typeof(g.singleMuteElement)!="undefined"){_singleMuteElement=g.singleMuteElement();_singleMuteElement.addEventListener(psd.fenix.MouseEvent.MOUSE_DOWN,u,this)}if(typeof(g.reiniElement)!="undefined"){_reiniElement=g.reiniElement();_reiniElement.addEventListener(psd.fenix.MouseEvent.MOUSE_DOWN,x,this)}if(this.isPlaying()){g.updateOnStatusChange("play")}g.resizeSkin(s.stageWidth(),s.stageHeight());c=true};var aa=function(af){if(V.paused()){this.play()}else{this.pause()}};var F=function(af){P.visible=false;g.showProgressBar();this.play()};var E=function(){if(s.displayState()==psd.fenix.stage.StageDisplayState.NORMAL){s.displayState(psd.fenix.stage.StageDisplayState.FULL_SCREEN)}else{s.displayState(psd.fenix.stage.StageDisplayState.NORMAL)}};var r=function(af){N(af.data)};var N=function(af){V.seek(af)};var x=function(af){V.seek(0);this.play()};var o=function(af){q(af.data)};var q=function(af){V.volume(af);M=af;if(g){if(g.muteElement!=undefined){if(af==0){g.updateOnMuteChange("muted")}else{g.updateOnMuteChange("active")}}}};var d=function(af){w()};var w=function(){if(ab<=0){ab=M<=0?0.8:M;if(g){g.volumeElement().setProgress(ab)}if(g){g.updateOnMuteChange("active")}}else{M=ab;if(g){g.volumeElement().setProgress(0)}if(g){g.updateOnMuteChange("muted")}ab=0}V.volume(ab)};var u=function(af){if(M<=0){M=0.8;g.updateOnMuteChange("active")}else{M=0;g.updateOnMuteChange("muted")}V.volume(M)};var K=function(){var ah=V.duration()>3600?"hh:mm:ss":"mm:ss",ag=V.duration(),af=V.currentTime();if(ac){ac.text(V.currentTimeAsTimeCode(ah))}if(f){if(z.media.live!=undefined&&z.media.live==true){f.text("Live")}else{f.text(V.durationAsTimeCode(ah))}}if(L){L.setProgress(V.currentTime()/V.duration())}if(!v&&af>0.25*ag){v=true;this.dispatchEvent(new psd.media.MediaEvent(psd.media.MediaEvent.MEDIA_FIRST_QUART,{duration:ag}))}if(!p&&af>0.5*ag){p=true;this.dispatchEvent(new psd.media.MediaEvent(psd.media.MediaEvent.MEDIA_HALF,{duration:ag}))}if(!B&&af>0.75*ag){B=true;this.dispatchEvent(new psd.media.MediaEvent(psd.media.MediaEvent.MEDIA_THIRD_QUART,{duration:ag}))}if(l==true){this.dispatchEvent(new psd.media.MediaEvent(psd.media.MediaEvent.MEDIA_PROGRESS,{duration:ag,time:af}))}};var H=function(af){this.dispatchEvent(new psd.media.MediaEvent(psd.media.MediaEvent.MEDIA_BEGIN,{duration:V.duration()}))};var C=function(af){this.dispatchEvent(new psd.media.MediaEvent(psd.media.MediaEvent.MEDIA_START,{duration:V.duration()}))};var y=function(af){this.dispatchEvent(new psd.media.MediaEvent(psd.media.MediaEvent.MEDIA_STOP,{duration:V.duration()}))};var t=function(af){if(g){g.updateOnStatusChange("pause")}if(L){L.setProgress(0.01)}this.dispatchEvent(new psd.media.MediaEvent(psd.media.MediaEvent.MEDIA_COMPLETE,{duration:V.duration()}));v=false;p=false;B=false};var R=function(af){if(g&&c){g.updateOnStatusChange("play")}this.dispatchEvent(new psd.media.MediaEvent(psd.media.MediaEvent.ESTADO_BUFFER_FULL,{duration:V.duration(),time:V.currentTime()}))};var X=function(af){this.dispatchEvent(new psd.media.MediaEvent(psd.media.MediaEvent.ESTADO_BUFFER_EMPTY,{duration:V.duration(),time:V.currentTime()}))};var n=function(){var af=new psd.fenix.Rectangle(0,0,s.stageWidth(),s.stageHeight());if(g){af=g.resizeSkin(s.stageWidth(),s.stageHeight())}O.resize(af.x,af.y,af.width,af.height)};var J=function(){if(g){g.updateOnDisplayStateChange(s.displayState())}};this.isPlaying=function(){return !V.paused()};this.duration=function(){return V.duration()};this.play=function(){if(g){g.updateOnStatusChange("play")}V.play()};this.pause=function(){if(g){g.updateOnStatusChange("pause")}V.pause()};this.volume=function(af){q(af);if(g){g.volumeElement().setProgress(af)}};this.mute=function(){w()};this.currentTime=function(af){N(af)};this.setProgressEvent=function(af){l=af};this.requestFullScreen=function(){s.displayState(psd.fenix.stage.StageDisplayState.FULL_SCREEN)};this.cancelFullScreen=function(){s.displayState(psd.fenix.stage.StageDisplayState.NORMAL)};W.apply(this)}a.SkinnedSimpleMediaPlayer=b}(psd.media));(function(b){a.prototype=new psd.framework.Event();a.SKIN_READY="SKIN_READY";function a(c){psd.framework.Event.call(this,c)}b.SkinEvent=a})(psd.media);(function(a){b.prototype=new psd.fenix.DisplayObjectContainer();function b(s,o){psd.fenix.DisplayObjectContainer.call(this);this.className="psd.media.skins.MediaSimple_vodafone40";var d=s;var m=o!=undefined?o:"";var c=null;var e=false;var g=null;var r=null;var q=null;var l=null;var h=null;var n=null;var p=null;var u=5;var i=null;var t=null;var f="pause";var k=function(){c=new psd.fenix.textures.TextureAtlas(m+"/psdmedia/media/simple/skins/vodafone40/rsc/player.atlas.png",m+"/psdmedia/media/simple/skins/vodafone40/rsc/player.atlas.php",m!="");c.addEventListener("texture_atlas_ready",j,this)};var j=function(){var F=c.texture(),D=c.getFrames(["play","pause"]),B=c.getFrames("bar_fg_begin"),C=c.getFrames("bar_bg_end"),w=c.getFrames("bar_bg_center"),A=c.getFrames("bar_fg_center"),x=c.getFrames("slider_volume"),y=c.getFrames("radio_icon"),v=c.getFrames(["mute_off","mute_on"]),E=c.getFrames("background");g=new psd.fenix.Movieclip(F,D);g.useHandCursor=true;g.buttonMode=true;g.gotoAndStop("play");g.boundsDetection(true);l=new psd.fenix.Movieclip(F,x);l.useHandCursor=true;l.buttonMode=true;h=new psd.fenix.Movieclip(F,y);r=new psd.fenix.controls.ProgressBar(F,B,C,w,A);r.slider(l);r.liveUpdate(true);r.visible=false;n=new psd.fenix.Movieclip(F,v);n.useHandCursor=true;n.buttonMode=true;n.gotoAndStop("muteOff");n.boundsDetection(true);n.visible=false;var z=new psd.fenix.text.TextFormat();z.color=8618883;z.size=12;q=new psd.fenix.text.TextField();q.setTextFormat(z);q.text(d.coverMessage);p=new psd.fenix.Movieclip(F,E);this.addChild(p);this.addChild(g);this.addChild(r);this.addChild(q);this.addChild(h);this.addChild(n);e=true;this.dispatchEvent(new psd.media.SkinEvent(psd.media.SkinEvent.SKIN_READY))};this.resizeSkin=function(w,v){if(e){i=w;t=v;p.width(w);p.height(v);g.x=u;g.y=(v/2)-(g.height()/2);h.x=g.x+g.width()+(u*2);h.y=(v/2)-(h.height()/2);if(f=="pause"){q.x=h.x+h.width()+u}else{if(f=="play"){q.x=n.x+n.width()+u}}q.y=g.y+3;r.resize(100);r.x=g.x+g.width()+(u*2);r.y=(v/2+l.height()/2)-(r.height()/2)-(u/2);n.x=r.x+r.width()+(u*2);n.y=(v/2)-(n.height()/2);this.graphics().clear();this.graphics().lineStyle(0,3092273,1);this.graphics().beginFill(3092273,0);this.graphics().drawRect(0,0,w,v);this.graphics().endFill()}return new psd.fenix.Rectangle(0,0,w,v)};this.updateOnStatusChange=function(v){f=v;if(v=="play"){g.gotoAndStop("pause");q.text(d.liveMessage);q.x=n.x+n.width()+u;r.visible=true;n.visible=true;h.visible=false}else{if(v=="pause"){g.gotoAndStop("play");q.text(d.coverMessage);q.x=h.x+h.width()+u;r.visible=false;n.visible=false;h.visible=true}}};this.updateOnMuteChange=function(v){if(v=="active"){n.gotoAndStop("muteOff")}else{if(v=="muted"){n.gotoAndStop("muteOn")}}};this.playPauseElement=function(){return g};this.muteElement=function(){return n};this.titleElement=function(){return q};this.volumeElement=function(){return r};k.apply(this)}a.MediaSimple_vodafone40=b}(psd.media.skins));