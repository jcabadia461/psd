(function(a){if(a.psd==undefined){a.psd={}}if(a.psd.fenix==undefined){a.psd.fenix={}}})(window);(function(b){a._nextID=0;a.getKeyId=function(){return a._nextID++};function a(){}b.UID=a})(psd.fenix);(function(a){b.colorToRGB=function(e,i){if(typeof e==="string"&&e[0]==="#"){e=window.parseInt(e.slice(1),16)}i=(i===undefined)?1:i;var h=e>>16&255,f=e>>8&255,c=e&255,d=(i<0)?0:((i>1)?1:i);if(d===1){return"rgb("+h+","+f+","+c+")"}else{return"rgba("+h+","+f+","+c+","+d+")"}};function b(){}a.ColorUtil=b})(psd.fenix);(function(a){b.containsPoint=function(d,c,e){return !(c<d.x||c>d.x+d.width||e<d.y||e>d.y+d.height)};b.intersects=function(d,c){return !(d.x+d.width<c.x||c.x+c.width<d.x||d.y+d.height<c.y||c.y+c.height<d.y)};function b(){}a.MathUtil=b})(psd.fenix);(function(a){function b(c,d){this.x=c|0;this.y=d|0;this.clone=function(){return new b(this.x,this.y)};this.add=function(e){return new b(this.x+e.x,this.y+e.y)};this.degreesTo=function(g){var f=this.x-g.x;var e=this.y-g.y;var h=Math.atan2(e,f);return h*(180/Math.PI)};this.distance=function(f){var e=this.x-f.x;var g=this.y-f.y;return Math.sqrt(e*e+g*g)};this.equals=function(e){return this.x==e.x&&this.y==e.y};this.interpolate=function(g,e){return new b((this.x+g.x)*e,(this.y+g.y)*e)};this.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)};this.normalize=function(f){var e=this.length();this.x=this.x/e*f;this.y=this.y/e*f};this.orbit=function(f,e,g,i){var h=i*(Math.PI/180);this.x=f.x+e*Math.cos(h);this.y=f.y+g*Math.sin(h)};this.offset=function(f,e){this.x+=f;this.y+=e};this.subtract=function(e){return new b(this.x-e.x,this.y-e.y)};this.toString=function(){return"(x="+this.x+", y="+this.y+")"};b.interpolate=function(h,g,e){return new b((h.x+g.x)*e,(h.y+g.y)*e)};b.polar=function(e,f){return new b(e*Math.sin(f),e*Math.cos(f))};b.distance=function(g,f){var e=g.x-f.x;var h=g.y-f.y;return Math.sqrt(e*e+h*h)}}a.Point=b})(psd.fenix);(function(b){function a(d,e,c){this.x=d|0;this.y=e|0;this.r=c|1;this.clone=function(){return new a(this.x,this.y,this.r)};this.toString=function(){return"(x="+this.x+", y="+this.y+", radius="+this.r+")"}}b.Girth=a})(psd.fenix);(function(b){function a(d,f,e,c){this.x=d||0;this.y=f||0;this.width=e||1;this.height=c||1;this.clone=function(){return new a(this.x,this.y,this.width,this.height)};this.toString=function(){return"(x="+this.x+", y="+this.y+", width="+this.width+", height="+this.height+")"}}b.Rectangle=a})(psd.fenix);(function(b){a.prototype=new psd.framework.Event();a.INIT="init";a.INIT_ERROR="initError";a.ADDED_TO_STAGE="addedToStage";a.REMOVE_FROM_STAGE="removeFromStage";a.ENTER_FRAME="enterFrame";a.ADDED="added";a.REMOVED="removed";a.RESIZE="resize";function a(c){psd.framework.Event.call(this,c)}b.StageEvent=a})(psd.fenix);(function(b){a.prototype=new psd.framework.Event();a.CLICK="click";a.MOUSE_DOWN="mouseDown";a.MOUSE_UP="mouseUp";a.MOUSE_MOVE="mouseMove";a.MOUSE_OVER="mouseOver";a.MOUSE_OUT="mouseOut";this.stageX=0;this.stageY=0;function a(e,d,c){psd.framework.Event.call(this,e);this.stageX=d;this.stageY=c}b.MouseEvent=a})(psd.fenix);(function(b){function a(f,d){var e=d[0]|1;var c=d[1]|0;var h=d[2]|0;this.exec=function(){f.thicknessStroke(e);f.colorStroke(c);f.alphaStroke(h)};this.hitTest=function(){return false}}b.LineStyleCommand=a})(psd.fenix);(function(b){function a(e,d){var c=d[0];var f=d[1];this.exec=function(){e.cursor(new Point(c,f))};this.hitTest=function(){return false}}b.MoveToCommand=a})(psd.fenix);(function(b){function a(e,d){var c=d[0];var f=d[1];this.exec=function(){e.context2d().save();e.context2d().beginPath();e.context2d().strokeStyle=window.utils.colorToRGB(e.colorStroke(),e.alphaStroke());e.context2d().lineWidth=e.thicknessStroke();e.context2d().moveTo(e.cursor().x,e.cursor().y);e.context2d().lineTo(c,f);e.context2d().stroke();e.context2d().closePath();_hitTest=e.context2d().isPointInPath(e.stage().mouseX(),e.stage().mouseY());e.context2d().restore();e.cursor(new Point(c,f))};this.hitTest=function(){return _hitTest}}b.LineToCommand=a})(psd.fenix);(function(b){function a(f,d){var i=d[0];var h=d[1];var e=d[2];var c=d[3];this.exec=function(){f.context2d().save();f.context2d().beginPath();f.context2d().strokeStyle=window.utils.colorToRGB(f.colorStroke(),f.alphaStroke());f.context2d().lineWidth=f.thicknessStroke();f.context2d().moveTo(f.cursor().x,f.cursor().y);f.context2d().quadraticCurveTo(i,h,e,c);f.context2d().stroke();f.context2d().closePath();_hitTest=f.context2d().isPointInPath(f.stage().mouseX(),f.stage().mouseY());f.context2d().restore();f.cursor(new Point(_toX,_toY))};this.hitTest=function(){return _hitTest}}b.CurveToCommand=a})(psd.fenix);(function(a){function b(i,d){var f=d[0];var c=d[1];var h=d[2];var e=d[3];var j=d[4];this.exec=function(){var k=i.context2d().createLinearGradient(f.x,f.y,c.x,c.y);if(h.length==j.length&&h.length==e.length){var g=0;for(g=0;g<h.length;g++){k.addColorStop(j[g],window.utils.colorToRGB(h[g],e[g]))}}i.gradientFill(k)};this.hitTest=function(){return false}}a.BeginLinearGradientFillCommand=b})(psd.fenix);(function(a){function b(f,c){var i=c[0];var h=c[1];var e=c[2];var d=c[3];var j=c[4];this.exec=function(){var k=f.context2d().createRadialGradient(i.x,i.y,i.r,h.x,h.y,h.r);if(e.length==j.length&&e.length==d.length){var g=0;for(g=0;g<e.length;g++){k.addColorStop(j[g],window.utils.colorToRGB(e[g],d[g]))}}f.gradientFill(k)};this.hitTest=function(){return false}}a.BeginRadialGradientFillCommand=b})(psd.fenix);(function(b){function a(e,d){var f=d[0];var c=d[1];this.exec=function(){e.colorFill(f);e.alphaFill(c)};this.hitTest=function(){return false}}b.BeginFillCommand=a})(psd.fenix);(function(b){function a(j,h){var f=h[0];var e=h[1];var d=h[2];var i=h[3];var c=false;this.exec=function(){j.context2d().save();j.context2d().beginPath();j.context2d().fillStyle=j.gradientFill()!=null?j.gradientFill():window.utils.colorToRGB(j.colorFill(),j.alphaFill());j.context2d().fillRect(f,e,d,i);j.context2d().fill();j.context2d().lineWidth=j.thicknessStroke();j.context2d().strokeRect(f,e,d,i);j.context2d().strokeStyle=window.utils.colorToRGB(j.colorStroke(),j.alphaStroke());j.context2d().stroke();j.context2d().rect(f,e,d,i);c=j.context2d().isPointInPath(j.stage().mouseX(),j.stage().mouseY());j.context2d().restore();j.gradientFill(null)};this.hitTest=function(){return c}}b.DrawRectCommand=a})(psd.fenix);(function(a){function b(h,f){var e=f[0];var d=f[1];var i=f[2];var c=false;this.exec=function(){h.context2d().save();h.context2d().beginPath();h.context2d().fillStyle=h.gradientFill()!=null?h.gradientFill():window.utils.colorToRGB(h.colorFill(),h.alphaFill());h.context2d().arc(e,d,i,0,2*Math.PI,false);h.context2d().fill();h.context2d().strokeStyle=window.utils.colorToRGB(h.colorStroke(),h.alphaStroke());h.context2d().lineWidth=h.thicknessStroke;h.context2d().stroke();c=h.context2d().isPointInPath(h.stage().mouseX(),h.stage().mouseY());h.context2d().restore();h.gradientFill(null)};this.hitTest=function(){return c}}a.DrawCircleCommand=b})(psd.fenix);(function(b){a.prototype=new psd.framework.EventDispatcher();function a(p){var n=null;var g=p;var l=null;var h=new psd.fenix.Point();var f=1;var c="rgb(0,0,0)";var m=0;var k="rgb(0,0,0)";var o=0;var j=null;var i=false;var d=false;var e=[];this.cursor=function(q){if(q!=undefined){h=q}else{return h}};this.alphaFill=function(q){if(!isNaN(q)){f=q}else{return f}};this.colorFill=function(q){if(q!=undefined){c=q}else{return c}};this.alphaStroke=function(q){if(!isNaN(q)){m=q}else{return m}};this.thicknessStroke=function(q){if(!isNaN(q)){o=q}else{return o}};this.colorStroke=function(q){if(q!=undefined){k=q}else{return k}};this.gradientFill=function(){if(arguments.length>0){j=arguments[0]}else{return j}};this.context2d=function(q){if(q){l=q}else{return l}};this.stage=function(q){if(q){n=q}else{return n}};this.hitTest=function(q){if(q==true||q==false){i=q}else{return i}};this.lineStyle=function(r,q,s){e.push(new LineStyleCommand(this,[r,q,s]))};this.moveTo=function(q,r){e.push(new MoveToCommand(this,[q,r]))};this.lineTo=function(q,r){e.push(new LineToCommand(this,[q,r]))};this.curveTo=function(s,r,q,t){e.push(new CurveToCommand(this,[s,r,q,t]))};this.beginFill=function(q,r){e.push(new BeginFillCommand(this,[q,r]))};this.beginLinearGradientFill=function(u,s,r,q,t){e.push(new BeginLinearGradientFillCommand(this,[u,s,r,q,t]))};this.beginRadialGradientFill=function(s,u,r,q,t){e.push(new BeginRadialGradientFillCommand(this,[s,u,r,q,t]))};this.drawRect=function(r,t,s,q){e.push(new DrawRectCommand(this,[r,t,s,q]))};this.drawCircle=function(r,s,q){e.push(new DrawCircleCommand(this,[r,s,q]))};this.draw=function(){var q;for(q=0;q<e.length;q++){e[q].exec();i=i||e[q].hitTest()}}}b.Graphics=a})(psd.fenix);(function(b){a.prototype=new psd.framework.EventDispatcher();function a(){psd.framework.EventDispatcher.call(this);var h=psd.fenix.UID.getKeyId();this.name="instance_"+h;this.className="DisplayObject";this.parent=null;this.x=0;this.y=0;this.width=0;this.height=0;this.scaleX=1;this.scaleY=1;this.rotation=0;this.alpha=1;this.visible=true;this.mouseEnabled=true;this.buttonMode=false;this.useHandCursor=true;this.scrollRect=null;var j=null;this.stage=function(k){if(k){j=k;this.graphics.stage(k)}else{return j}};var d=null;this.context2d=function(k){if(k){d=k;this.graphics.context2d(k)}else{return d}};var f=null;var g=false;this.isMouseOver=function(k){if(k==true||k==false){g=k;return k}else{return g}};var c=false;this.isMouseDown=function(k){if(k==true||k==false){c=k;return k}else{return c}};this.graphics=new psd.fenix.Graphics(this);this.draw=function(){this.render(d)};this.render=function(k){i();if(k!=null&&this.visible&&this.alpha>0){k.save();e.apply(this,[k]);this.graphics.draw();if(this._render){this._render(k)}k.restore()}};var e=function(l,m,k){if(m==null){m=0}if(k==null){k=0}l.scale(this.scaleX,this.scaleY);l.translate(this.x-m,this.y-k);l.rotate(this.rotation);l.globalAlpha=this.alpha;if(this.parent){l.globalAlpha=l.globalAlpha*this.parent.alpha}if(this.scrollRect!=null){l.beginPath();l.rect(0,0,this.scrollRect.width,this.scrollRect.height);l.clip();l.translate(-this.scrollRect.x,-this.scrollRect.y)}};this.testHit=function(k,n){var m=false;if(psd!=null&&psd.fenix!=null&&psd.fenix.hitContext!=null&&this.visible){var l=psd.fenix.hitContext;l.clearRect(0,0,1,1);l.save();e.apply(this,[l,k,n]);if(typeof(this._render)!="undefined"){this._render(l,true)}if(typeof(l.getImageData)!="undefined"){m=l.getImageData(0,0,1,1).data[3]>1}l.restore()}return m};this.calculateMouseStatus=function(l,n,k){var m=this.testHit(l,n);this.updateMouseStatus(m,k,false);return m};this.calculateMouseDownStatus=function(l,n,k){var m=this.testHit(l,n);this.updateMouseDownStatus(m,k);return m};this.invalidateMouseStatus=function(){this.updateMouseStatus(false,false,true)};this.updateMouseStatus=function(l,k,m){if(this.className!="Stage"){if(l){if(!this.isMouseOver()){this.isMouseOver(true);if(!m){if(this.buttonMode&&this.useHandCursor){f=document.body.style.cursor;document.body.style.cursor="pointer"}}this.dispatchEvent(new psd.fenix.MouseEvent(psd.fenix.MouseEvent.MOUSE_OVER))}}else{if(this.isMouseOver()){this.isMouseOver(false);if(!m){document.body.style.cursor=f;f=null}this.dispatchEvent(new psd.fenix.MouseEvent(psd.fenix.MouseEvent.MOUSE_OUT))}}}};this.updateMouseDownStatus=function(l,k){if(k){if(l){if(!this.isMouseDown()){this.isMouseDown(true);this.dispatchEvent(new psd.fenix.MouseEvent(psd.fenix.MouseEvent.MOUSE_DOWN))}}else{if(this.isMouseDown()){this.isMouseDown(false);this.dispatchEvent(new psd.fenix.MouseEvent(psd.fenix.MouseEvent.MOUSE_UP))}}}else{if(this.isMouseDown()){this.isMouseDown(false);this.dispatchEvent(new psd.fenix.MouseEvent(psd.fenix.MouseEvent.MOUSE_UP))}}};this.setGlobalVars=function(o,l,k,n){this.parent=o;this.stage(l);this.context2d(k);this.mouseEnabled=this.mouseChildren;if(this.numChildren!=null){var p=this.displayList();var m=0;for(m=0;m<p.length;m++){p[m].setGlobalVars(this.parent,this.stage(),this.context2d(),this.mouseEnabled)}}};function i(){}}b.DisplayObject=a})(psd.fenix);(function(a){b.prototype=new psd.fenix.DisplayObject();function b(){psd.fenix.DisplayObject.call(this);var c=[];var d=true;this.className="DisplayObjectContainer";this.displayList=function(){return c};this.mouseChildren=function(e){if(e==true||e==false){d=e}else{return d}};this.numChildren=function(){return c.length};this.addChild=function(g){c.push(g);this.setGlobalVars(this,this.stage(),this.context2d(),this.mouseChildren());if(g.numChildren!=null){var f=g.displayList();var e=0;for(e=0;e<f.length;e++){f[e].setGlobalVars(this,this.stage(),this.context2d(),this.mouseChildren())}}if(this.className=="Stage"){this.dispatchEvent(psd.fenix.StageEvent.ADDED_TO_STAGE)}else{this.dispatchEvent(psd.fenix.StageEvent.REMOVED)}return g};this.addChildAt=function(h,e){c.splice(e,0,h);this.setGlobalVars(this,this.stage(),this.context2d(),this.mouseChildren());if(h.numChildren!=null){var g=h.displayList();var f=0;for(f=0;f<g.length;f++){g[f].setGlobalVars(this,this.stage(),this.context2d(),this.mouseChildren())}}if(this.className=="Stage"){this.dispatchEvent(psd.fenix.StageEvent.ADDED_TO_STAGE)}else{this.dispatchEvent(psd.fenix.StageEvent.REMOVED)}return h};this.removeChild=function(f){var e=c.indexOf(f);if(e>=0){c.splice(e,1)}if(this.className=="Stage"){this.dispatchEvent(psd.fenix.StageEvent.REMOVE_FROM_STAGE)}else{this.dispatchEvent(psd.fenix.StageEvent.REMOVED)}return f};this.removeChildAt=function(e){var f=null;if(e>=0&&e<=c.length){f=c[e];c.splice(e,1)}if(this.className=="Stage"){this.dispatchEvent(psd.fenix.StageEvent.REMOVE_FROM_STAGE)}else{this.dispatchEvent(psd.fenix.StageEvent.REMOVED)}return f};this.draw=function(){if(this.context2d()!=null&&this.visible&&this.alpha>0){this.context2d().save();this.context2d().scale(this.scaleX,this.scaleY);this.context2d().translate(this.x,this.y);this.context2d().rotate(this.rotation);this.context2d().globalAlpha=this.alpha;this.graphics.draw();if(this._render){this._render(this.context2d())}var e=0;for(e=0;e<c.length;e++){c[e].draw()}this.context2d().restore()}};this.calculateMouseStatus=function(f,j,e){var h=false;var g=c.length;while(g>0){g--;h=c[g].calculateMouseStatus(f,j,e);if(h){break}}if(g>0){while(g>0){g--;c[g].invalidateMouseStatus()}}if(!h){h=b.prototype.calculateMouseStatus.apply(this,[f,j,e,false])}this.updateMouseStatus(h,e,true);return h};this.calculateMouseDownStatus=function(f,j,e){var h=false;var g=c.length;while(g>0){g--;h=c[g].calculateMouseDownStatus(f,j,e);if(h){break}}if(!h){h=b.prototype.calculateMouseDownStatus.apply(this,[f,j,e,false])}this.updateMouseDownStatus(h,e,true);return h}}a.DisplayObjectContainer=b})(psd.fenix);(function(b){a.prototype=new psd.framework.EventDispatcher();function a(p){var n=null;var g=p;var l=null;var h=new psd.fenix.Point();var f=1;var c="rgb(0,0,0)";var m=0;var k="rgb(0,0,0)";var o=0;var j=null;var i=false;var d=false;var e=[];this.cursor=function(q){if(q!=undefined){h=q}else{return h}};this.alphaFill=function(q){if(!isNaN(q)){f=q}else{return f}};this.colorFill=function(q){if(q!=undefined){c=q}else{return c}};this.alphaStroke=function(q){if(!isNaN(q)){m=q}else{return m}};this.thicknessStroke=function(q){if(!isNaN(q)){o=q}else{return o}};this.colorStroke=function(q){if(q!=undefined){k=q}else{return k}};this.gradientFill=function(){if(arguments.length>0){j=arguments[0]}else{return j}};this.context2d=function(q){if(q){l=q}else{return l}};this.stage=function(q){if(q){n=q}else{return n}};this.hitTest=function(q){if(q==true||q==false){i=q}else{return i}};this.lineStyle=function(r,q,s){e.push(new LineStyleCommand(this,[r,q,s]))};this.moveTo=function(q,r){e.push(new MoveToCommand(this,[q,r]))};this.lineTo=function(q,r){e.push(new LineToCommand(this,[q,r]))};this.curveTo=function(s,r,q,t){e.push(new CurveToCommand(this,[s,r,q,t]))};this.beginFill=function(q,r){e.push(new BeginFillCommand(this,[q,r]))};this.beginLinearGradientFill=function(u,s,r,q,t){e.push(new BeginLinearGradientFillCommand(this,[u,s,r,q,t]))};this.beginRadialGradientFill=function(s,u,r,q,t){e.push(new BeginRadialGradientFillCommand(this,[s,u,r,q,t]))};this.drawRect=function(r,t,s,q){e.push(new DrawRectCommand(this,[r,t,s,q]))};this.drawCircle=function(r,s,q){e.push(new DrawCircleCommand(this,[r,s,q]))};this.draw=function(){var q;for(q=0;q<e.length;q++){e[q].exec();i=i||e[q].hitTest()}}}b.Graphics=a})(psd.fenix);(function(b){a.prototype=new psd.fenix.DisplayObject();function a(d,m){psd.fenix.DisplayObject.call(this);var c=d;var e=m;var g=false;var p=false;var i=0;var h=new psd.framework.Mediator();h.addEventListener(psd.framework.MediatorEvent.MEDIATE_COMPLETE,n);h.addEventListener(psd.framework.MediatorEvent.MEDIATE_ERROR,j);var o=new Image();o.onload=function(){g=true};var l=new psd.framework.Parser();var q;var f=0;var k=true;this._render=function(r,s){if(p==true&&g==true){var t=q.frames[i].frame;r.drawImage(o,t.x,t.y,t.w,t.h,0,0,this.width,this.height);if(k&&!s){i++;if(i>=f){i=0}}}};this.gotoAndStop=function(r){k=false;i=r};this.gotoAndPlay=function(r){k=true;i=r};this.play=function(){k=true};this.stop=function(){k=false};function n(r){q=JSON.parse(r.result.parserResult.result);f=q.frames.length;p=true}function j(r,s){Log.log("onMediateError:");Log.log("   code: "+s.code);Log.log("   msg: "+s.msg)}h.mediate(e,l,psd.framework.Mediator.RESPONSE_JSON);o.src=c}b.Movieclip=a})(psd.fenix);(function(b){a.prototype=new psd.fenix.DisplayObject();a.ATTR_AUTOPLAY="autoplay";a.ATTR_CONTROLS="controls";a.ATTR_HEIGHT="height";a.ATTR_LOOP="loop";a.ATTR_MUTED="muted";a.ATTR_POSTER="poster";a.ATTR_PRELOAD="preload";a.ATTR_SRC="src";a.ATTR_STYLE="style";a.ATTR_WIDTH="width";a.ATTR_SRC="src";a.ATTR_TYPE="type";a.ELEMENT_SOURCE="source";a.ELEMENT_VIDEO="video";a.STYLE="display: none;";function a(h){psd.fenix.DisplayObject.call(this);var f=false;var i=false;var c="metadata";var e=false;var d=null;var g=h;this._render=function(j){if(e&&d!=null){j.drawImage(d,0,0,this.width,this.height)}if(!e&&this.stage()!=null){d=document.createElement(a.ELEMENT_VIDEO);d.setAttribute(a.ATTR_STYLE,a.STYLE);d.setAttribute(a.ATTR_PRELOAD,c);d.setAttribute(a.ATTR_WIDTH,this.width);d.setAttribute(a.ATTR_HEIGHT,this.height);if(this.autoPlay()){d.setAttribute(a.ATTR_AUTOPLAY)}if(this.loop()){d.setAttribute(a.ATTR_LOOP)}var l;for(l in g){var k=document.createElement(a.ELEMENT_SOURCE);k.setAttribute(a.ATTR_SRC,g[l].src);k.setAttribute(a.ATTR_TYPE,g[l].type);d.appendChild(k)}e=true}};this.testHit=function(j,k){return(j>=this.x&&j<=this.x+this.width&&k>=this.y&&k<=this.y+this.height)};this.loop=function(j){if(j){i=j;if(d!=null){if(j==true){d.setAttribute(a.ATTR_LOOP)}else{d.removeAttribute(a.ATTR_LOOP)}}}else{return i}};this.autoPlay=function(j){if(j){f=j;if(d!=null){if(j==true){d.setAttribute(a.ATTR_AUTOPLAY)}else{d.removeAttribute(a.ATTR_AUTOPLAY)}}}else{return i}};this.play=function(){d.play()};this.pause=function(){d.pause()}}b.Video=a})(psd.fenix);(function(b){a.LEFT="left";a.RIGHT="right";a.CENTER="center";a.start="start";a.end="end";function a(){}b.HorizontalAlignText=a})(psd.fenix);(function(a){b.TOP="top";b.HANGING="hanging";b.MIDDLE="middle";b.ALPHABETIC="alphabetic";b.END="ideographic";b.BOTTOM="bottom";function b(){}a.VerticalAlignText=b})(psd.fenix);(function(a){b.prototype=new psd.fenix.DisplayObject();function b(){psd.fenix.DisplayObject.call(this);this.text="";this.font="Helvetica";this.color=0;this.size=12;this.horizontalAlign="left";this.verticalAlign="top";this.style="normal";this.meisureSize="px";this.getTextWidth=function(){return this.width};this._render=function(c){c.textAlign=this.horizontalAlign;c.textBaseline=this.verticalAlign;c.fillStyle=psd.fenix.ColorUtil.colorToRGB(this.color,this.alpha);c.font=this.style+" "+this.size+this.meisureSize+" "+this.font;c.fillText(this.text,0,0)}}a.Text=b})(psd.fenix);(function(a){b.prototype=new psd.fenix.DisplayObjectContainer();b.FPS=30;function b(C,D){psd.fenix.DisplayObjectContainer.call(this);var c=C;var i=c+"_fenix";var m=c+"_hit";var g=this;var z=true;var B=null;var n=0;var o=0;var e=null;var t=null;var k=null;var d={};var p=null;var g=this;g.parent=this;var B=null;var n=0;var o=0;var e=null;var t=null;var k=null;var x=null;var q=false;var d={};var F={x:-5,y:-5};var h=false;this.className="Stage";b.FPS=D&&!isNaN(D.fps)?D.fps:30;this.init=function(){A()};this.start=function(){f();e=setInterval(E,(1000/b.FPS))};this.pause=function(){u();if(e!=null){clearInterval(e)}};this.changeFrameRate=function(G){b.FPS=G;if(e!=null){clearInterval(e);e=setInterval(E,1000/G)}};this.freeze=function(G){if(G==true||G==false){z=!G}};function A(){B=document.getElementById(c);if(B==null){g.dispatchEvent(new psd.fenix.StageEvent(psd.fenix.StageEvent.INIT_ERROR));return}g.stageWidth=n=B.clientWidth==undefined||B.clientWidth==0?348:B.clientWidth;g.stageHeight=o=B.clientHeight==undefined||B.clientHeight==0?365:B.clientHeight;t=document.createElement("canvas");t.width=g.stageWidth;t.height=g.stageHeight;t.id=i;B.appendChild(t);var J=document.createElement("canvas");J.id=m;J.width=J.height=1;if(t!=null){var I=navigator.appVersion.indexOf("MSIE");if(I>=0){var G=navigator.appVersion.substr(I+4,3);var K=parseFloat(G);if(K<9||!t.getContext){G_vmlCanvasManager.initElement(t);G_vmlCanvasManager.initElement(J);g.changeFrameRate(10)}}k=t.getContext("2d");var H=J.getContext("2d");psd.fenix.topLevelApplication=B;psd.fenix.stage=this;psd.fenix.canvasContext=k;psd.fenix.hitContext=H;g.mouseX=function(){return F.x};g.mouseY=function(){return F.y};g.isMouseDown=function(){return h};g.isMouseOver=function(){return q};g.getParent=function(){return B};g.backgroundColor=function(L){if(L){x=L;t.style.background=x}else{return x}};g.stage(g);g.context2d(k);g.start();g.dispatchEvent(new psd.fenix.StageEvent(psd.fenix.StageEvent.INIT))}else{g.dispatchEvent(new psd.fenix.StageEvent(psd.fenix.StageEvent.INIT_ERROR))}}function E(){if(B.clientWidth!=n||B.clientHeight!=o){g.dispatchEvent(new psd.fenix.StageEvent(psd.fenix.StageEvent.RESIZE))}if(z){w();g.draw()}if(g.isMouseOver()){g.calculateMouseStatus(g.mouseX(),g.mouseY(),g.isMouseDown())}g.dispatchEvent(new psd.fenix.StageEvent(psd.fenix.StageEvent.ENTER_FRAME))}function w(){k.clearRect(0,0,t.width,t.height)}function s(G){F.x=-5;F.y=-5;q=false;g.dispatchEvent(new psd.fenix.MouseEvent(psd.fenix.MouseEvent.MOUSE_OUT,F.x,F.y))}function v(H){if(H.offsetX){F.x=H.offsetX;F.y=H.offsetY}else{var G=y(t,H);F.x=G.x;F.y=G.y}q=true;g.dispatchEvent(new psd.fenix.MouseEvent(psd.fenix.MouseEvent.MOUSE_OVER,F.x,F.y))}function r(H){if(H.offsetX){F.x=H.offsetX;F.y=H.offsetY}else{var G=y(t,H);F.x=G.x;F.y=G.y}g.dispatchEvent(new psd.fenix.MouseEvent(psd.fenix.MouseEvent.MOUSE_MOVE,F.x,F.y))}function l(G){h=true;g.calculateMouseDownStatus(g.mouseX(),g.mouseY(),true);g.dispatchEvent(new psd.fenix.MouseEvent(psd.fenix.MouseEvent.MOUSE_DOWN,F.x,F.y))}function j(G){h=false;g.calculateMouseDownStatus(g.mouseX(),g.mouseY(),false);g.dispatchEvent(new psd.fenix.MouseEvent(psd.fenix.MouseEvent.MOUSE_UP,F.x,F.y))}function f(){if(t.addEventListener){t.addEventListener("mousemove",r,false);t.addEventListener("mouseover",v,false);t.addEventListener("mouseout",s,false);t.addEventListener("mousedown",l,false);t.addEventListener("mouseup",j,false)}else{if(t.attachEvent){t.attachEvent("onmousemove",r);t.attachEvent("onmouseover",v);t.attachEvent("onmouseout",s);t.attachEvent("onmousedown",l);t.attachEvent("onmouseup",j)}}}function u(){if(t.removeEventListener){t.removeEventListener("mousemove",r,false);t.removeEventListener("mouseover",v,false);t.removeEventListener("mouseout",s,false);t.removeEventListener("mousedown",l,false);t.removeEventListener("mouseup",j,false)}else{if(t.attachEvent){t.detachEvent("onmousemove",r);t.detachEvent("onmouseover",v);t.detachEvent("onmouseout",s);t.detachEvent("onmousedown",l);t.detachEvent("onmouseup",j)}}}function y(I,G){var M=I;var L=0;var K=0;while(M&&M.tagName!="BODY"){L+=M.offsetTop;K+=M.offsetLeft;M=M.offsetParent}var J=G.clientX-K+window.pageXOffset;var H=G.clientY-L+window.pageYOffset;return{x:J,y:H}}}a.Stage=b})(psd.fenix);